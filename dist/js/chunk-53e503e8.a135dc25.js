(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53e503e8"],{"020e":function(e,t,a){"use strict";var r=a("9e62"),i=a.n(r);i.a},"0bfb":function(e,t,a){"use strict";var r=a("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,a){var r=a("52a7"),i=a("4630"),n=a("6821"),o=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=n(e),t=o(t,!0),l)try{return c(e,t)}catch(a){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},1516:function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(function(){function t(e,t,a){return void 0==a?e:(e=null==e?{}:e,e[t]=a,e)}function n(e){function a(e){e.parentElement.removeChild(e)}function n(e,t,a){var r=0===a?e.children[0]:e.children[a-1].nextSibling;e.insertBefore(t,r)}function o(e,t){return e.map(function(e){return e.elm}).indexOf(t)}function s(e,t,a){if(!e)return[];var r=e.map(function(e){return e.elm}),n=[].concat(i(t)).map(function(e){return r.indexOf(e)});return a?n.filter(function(e){return-1!==e}):n}function l(e,t){var a=this;this.$nextTick(function(){return a.$emit(e.toLowerCase(),t)})}function c(e){var t=this;return function(a){null!==t.realList&&t["onDrag"+e](a),l.call(t,e,a)}}var u=["Start","Add","Remove","Update","End"],d=["Choose","Sort","Filter","Clone"],h=["Move"].concat(u,d).map(function(e){return"on"+e}),p=null,f={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},m={name:"draggable",props:f,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var a=this.$slots.default;if(a&&1===a.length){var r=a[0];r.componentOptions&&"transition-group"===r.componentOptions.tag&&(this.transitionMode=!0)}var n=a,o=this.$slots.footer;o&&(n=a?[].concat(i(a),i(o)):[].concat(i(o)));var s=null,l=function(e,a){s=t(s,e,a)};if(l("attrs",this.$attrs),this.componentData){var c=this.componentData,u=c.on,d=c.props;l("on",u),l("props",d)}return e(this.element,s,n)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var a={};u.forEach(function(e){a["on"+e]=c.call(t,e)}),d.forEach(function(e){a["on"+e]=l.bind(t,e)});var i=r({},this.options,a,{onMove:function(e,a){return t.onDragMove(e,a)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new e(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==h.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=s(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=o(this.getChildrenNodes()||[],e);if(-1===t)return null;var a=this.realList[t];return{index:t,element:a}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(i(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var a=function(a){return a.splice(t,0,a.splice(e,1)[0])};this.alterList(a)},getRelatedContextFromMoveEvent:function(e){var t=e.to,a=e.related,i=this.getUnderlyingPotencialDraggableComponent(t);if(!i)return{component:i};var n=i.realList,o={list:n,component:i};if(t!==a&&n&&i.getUnderlyingVm){var s=i.getUnderlyingVm(a);if(s)return r(s,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,a=t.length;return e>a-1?a:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var a=this.getComponent();a.children=[],a.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),p=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){a(e.item);var r=this.getVmIndex(e.newIndex);this.spliceList(r,0,t),this.computeIndexes();var i={element:t,newIndex:r};this.emitChanges({added:i})}},onDragRemove:function(e){if(n(this.rootContainer,e.item,e.oldIndex),this.isCloning)a(e.clone);else{var t=this.context.index;this.spliceList(t,1);var r={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:r})}},onDragUpdate:function(e){a(e.item),n(e.from,e.item,e.oldIndex);var t=this.context.index,r=this.getVmIndex(e.newIndex);this.updatePosition(t,r);var i={element:this.context.element,oldIndex:t,newIndex:r};this.emitChanges({moved:i})},computeFutureIndex:function(e,t){if(!e.element)return 0;var a=[].concat(i(t.to.children)).filter(function(e){return"none"!==e.style["display"]}),r=a.indexOf(t.related),n=e.component.getVmIndex(r),o=-1!=a.indexOf(p);return o||!t.willInsertAfter?n:n+1},onDragMove:function(e,t){var a=this.move;if(!a||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(e),n=this.context,o=this.computeFutureIndex(i,e);return r(n,{futureIndex:o}),r(e,{relatedContext:i,draggedContext:n}),a(e,t)},onDragEnd:function(e){this.computeIndexes(),p=null}}};return m}Array.from||(Array.from=function(e){return[].slice.call(e)});var o=a("53fe");e.exports=n(o)})()},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"28a5":function(e,t,a){a("214f")("split",2,function(e,t,r){"use strict";var i=a("aae3"),n=r,o=[].push,s="split",l="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var u=void 0===/()??/.exec("")[1];r=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(a,e,t);var r,s,d,h,p,f=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,m+"g");u||(r=new RegExp("^"+b.source+"$(?!\\s)",m));while(s=b.exec(a)){if(d=s.index+s[0][l],d>g&&(f.push(a.slice(g,s.index)),!u&&s[l]>1&&s[0].replace(r,function(){for(p=1;p<arguments[l]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[l]>1&&s.index<a[l]&&o.apply(f,s.slice(1)),h=s[0][l],g=d,f[l]>=v))break;b[c]===s.index&&b[c]++}return g===a[l]?!h&&b.test("")||f.push(""):f.push(a.slice(g)),f[l]>v?f.slice(0,v):f}}else"0"[s](void 0,0)[l]&&(r=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)});return[function(a,i){var n=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,i):r.call(String(n),a,i)},r]})},"2f21":function(e,t,a){"use strict";var r=a("79e5");e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"386d":function(e,t,a){a("214f")("search",1,function(e,t,a){return[function(a){"use strict";var r=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,r):new RegExp(a)[t](String(r))},a]})},"3b2b":function(e,t,a){var r=a("7726"),i=a("5dbc"),n=a("86cc").f,o=a("9093").f,s=a("aae3"),l=a("0bfb"),c=r.RegExp,u=c,d=c.prototype,h=/a/g,p=/a/g,f=new c(h)!==h;if(a("9e1e")&&(!f||a("79e5")(function(){return p[a("2b4c")("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(e,t){var a=this instanceof c,r=s(e),n=void 0===t;return!a&&r&&e.constructor===c&&n?e:i(f?new u(r&&!n?e.source:e,t):u((r=e instanceof c)?e.source:e,r&&n?l.call(e):t),a?this:d,c)};for(var m=function(e){e in c||n(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=o(u),v=0;g.length>v;)m(g[v++]);d.constructor=c,c.prototype=d,a("2aba")(r,"RegExp",c)}a("7a56")("RegExp")},4917:function(e,t,a){a("214f")("match",1,function(e,t,a){return[function(a){"use strict";var r=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,r):new RegExp(a)[t](String(r))},a]})},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"53fe":function(e,t,a){var r,i;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(n){"use strict";r=n,i="function"===typeof r?r.call(t,a,t,e):r,void 0===i||(e.exports=i)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,a,r,i,n,o,s,l,c,u,d,h,p,f,m,g,v,b,_,y,w,D,S,C,x=[],F=!1,k=!1,I=!1,T=[],O=!1,E=!1,N=/\s+/g,M="Sortable"+(new Date).getTime(),R=window,$=R.document,L=R.parseInt,j=R.setTimeout,P=R.jQuery||R.Zepto,Y=R.Polymer,A={capture:!1,passive:!1},V=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),q=!!navigator.userAgent.match(/Edge/i),B=q||V?"cssFloat":"float",H="draggable"in $.createElement("div"),X=function(){if(V)return!1;var e=$.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,K=!1,G=Math.abs,U=Math.min,W=[],J=function(e,t){var a=_e(e),r=L(a.width),i=Fe(e,0,t),n=Fe(e,1,t),o=i&&_e(i),s=n&&_e(n),l=o&&L(o.marginLeft)+L(o.marginRight)+Ve(i).width,c=s&&L(s.marginLeft)+L(s.marginRight)+Ve(n).width;if("flex"===a.display)return"column"===a.flexDirection||"column-reverse"===a.flexDirection?"vertical":"horizontal";if(i&&"none"!==o.float){var u="left"===o.float?"left":"right";return!n||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=r&&"none"===a[B]||n&&"none"===a[B]&&l+c>r)?"vertical":"horizontal"},Z=function(e,t){for(var a=0;a<T.length;a++)if(!T[a].children.length){var r=Ve(T[a]),i=T[a][M].options.emptyInsertThreshold,n=e>=r.left-i&&e<=r.right+i,o=t>=r.top-i&&t<=r.bottom+i;if(n&&o)return T[a]}},Q=function(e,t,a,r,i){var n=Ve(a),o="vertical"===r?n.left:n.top,s="vertical"===r?n.right:n.bottom,l="vertical"===r?e:t;return o<l&&l<s},ee=function(t,a,r){var i=t===e&&C||Ve(t),n=a===e&&C||Ve(a),o="vertical"===r?i.left:i.top,s="vertical"===r?i.right:i.bottom,l="vertical"===r?i.width:i.height,c="vertical"===r?n.left:n.top,u="vertical"===r?n.right:n.bottom,d="vertical"===r?n.width:n.height;return o===c||s===u||o+l/2===c+d/2},te=function(e,t){if(!e||!e.getBoundingClientRect)return R;var a=e,r=!1;do{if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var i=_e(a);if(a.clientWidth<a.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!a||!a.getBoundingClientRect||a===$.body)return R;if(r||t)return a;r=!0}}}while(a=a.parentNode);return R},ae=Re(function(e,t,a,r){if(t.scroll){var i=a?a[M]:window,n=t.scrollSensitivity,o=t.scrollSpeed,u=e.clientX,d=e.clientY,h=(window.innerWidth,window.innerHeight,!1);l!==a&&(re(),s=t.scroll,c=t.scrollFn,!0===s&&(s=te(a,!0),l=s));var p=0,f=s;do{var m,g,v,_,y,w,D,S,C,k=f,I=Ve(k),T=I.top,O=I.bottom,E=I.left,N=I.right,L=I.width,j=I.height;if(k!==R?(m=k.scrollWidth,g=k.scrollHeight,v=_e(k),w=L<m&&("auto"===v.overflowX||"scroll"===v.overflowX),D=j<g&&("auto"===v.overflowY||"scroll"===v.overflowY),S=k.scrollLeft,C=k.scrollTop):(m=$.documentElement.scrollWidth,g=$.documentElement.scrollHeight,v=_e($.documentElement),w=L<m&&("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),D=j<g&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY),S=$.documentElement.scrollLeft,C=$.documentElement.scrollTop),_=w&&(G(N-u)<=n&&S+L<m)-(G(E-u)<=n&&!!S),y=D&&(G(O-d)<=n&&C+j<g)-(G(T-d)<=n&&!!C),!x[p])for(var P=0;P<=p;P++)x[P]||(x[P]={});x[p].vx==_&&x[p].vy==y&&x[p].el===k||(x[p].el=k,x[p].vx=_,x[p].vy=y,clearInterval(x[p].pid),!k||0==_&&0==y||(h=!0,x[p].pid=setInterval(function(){r&&0===this.layer&&he.active._emulateDragOver(!0);var t=x[this.layer].vy?x[this.layer].vy*o:0,a=x[this.layer].vx?x[this.layer].vx*o:0;"function"===typeof c&&"continue"!==c.call(i,a,t,e,b,x[this.layer].el)||(x[this.layer].el===R?R.scrollTo(R.pageXOffset+a,R.pageYOffset+t):(x[this.layer].el.scrollTop+=t,x[this.layer].el.scrollLeft+=a))}.bind({layer:p}),24))),p++}while(t.bubbleScroll&&f!==R&&(f=te(f,!1)));F=h}},30),re=function(){x.forEach(function(e){clearInterval(e.pid)}),x=[]},ie=function(e){function t(e,a){return function(r,i,n,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(a||s))return!0;if(null==e||!1===e)return!1;if(a&&"clone"===e)return e;if("function"===typeof e)return t(e(r,i,n,o),a)(r,i,n,o);var l=(a?r:i).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var a={},r=e.group;r&&"object"==typeof r||(r={name:r}),a.name=r.name,a.checkPull=t(r.pull,!0),a.checkPut=t(r.put),a.revertClone=r.revertClone,e.group=a},ne=function(t){e&&e.parentNode&&e.parentNode[M]&&e.parentNode[M]._computeIsAligned(t)},oe=function(e,t){var a=t;while(!a[M])a=a.parentNode;return e===a},se=function(e,t,a){var r=e.parentNode;while(r&&!r[M])r=r.parentNode;r&&r[M][a](Le(t,{artificialBubble:!0}))},le=function(){!X&&a&&_e(a,"display","none")},ce=function(){!X&&a&&_e(a,"display","")};$.addEventListener("click",function(e){if(I)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),I=!1,!1},!0);var ue,de=function(t){if(t=t.touches?t.touches[0]:t,e){var a=Z(t.clientX,t.clientY);a&&a[M]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:a,rootEl:a})}};function he(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Le({},t),e[M]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return J(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:L(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==he.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var r in a)!(r in t)&&(t[r]=a[r]);for(var i in ie(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&H,t.supportPointer?ge(e,"pointerdown",this._onTapStart):(ge(e,"mousedown",this._onTapStart),ge(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ge(e,"dragover",this),ge(e,"dragenter",this)),T.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function pe(e,t,a,r){if(e){a=a||$;do{if(null!=t&&(">"===t[0]&&e.parentNode===a&&Me(e,t.substring(1))||Me(e,t))||r&&e===a)return e;if(e===a)break}while(e=fe(e))}return null}function fe(e){return e.host&&e!==$&&e.host.nodeType?e.host:e.parentNode}function me(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ge(e,t,a){e.addEventListener(t,a,A)}function ve(e,t,a){e.removeEventListener(t,a,A)}function be(e,t,a){if(e&&t)if(e.classList)e.classList[a?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(N," ").replace(" "+t+" "," ");e.className=(r+(a?" "+t:"")).replace(N," ")}}function _e(e,t,a){var r=e&&e.style;if(r){if(void 0===a)return $.defaultView&&$.defaultView.getComputedStyle?a=$.defaultView.getComputedStyle(e,""):e.currentStyle&&(a=e.currentStyle),void 0===t?a:a[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=a+("string"===typeof a?"":"px")}}function ye(e){var t="";do{var a=_e(e,"transform");a&&"none"!==a&&(t=a+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function we(e,t,a){if(e){var r=e.getElementsByTagName(t),i=0,n=r.length;if(a)for(;i<n;i++)a(r[i],i);return r}return[]}function De(e,t,a,i,n,o,s,l,c){e=e||t[M];var u,d=e.options,h="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||V||q?(u=$.createEvent("Event"),u.initEvent(a,!0,!0)):u=new CustomEvent(a,{bubbles:!0,cancelable:!0}),u.to=n||t,u.from=o||t,u.item=i||t,u.clone=r,u.oldIndex=s,u.newIndex=l,u.originalEvent=c,t&&t.dispatchEvent(u),d[h]&&d[h].call(e,u)}function Se(e,t,a,r,i,n,o,s){var l,c,u=e[M],d=u.options.onMove;return!window.CustomEvent||V||q?(l=$.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=a,l.draggedRect=r,l.related=i||t,l.relatedRect=n||Ve(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),d&&(c=d.call(u,l,o)),c}function Ce(e){e.draggable=!1}function xe(){z=!1}function Fe(t,r,i){var n=0,o=0,s=t.children;while(o<s.length){if("none"!==s[o].style.display&&s[o]!==a&&s[o]!==e&&pe(s[o],i.draggable,t,!1)){if(n===r)return s[o];n++}o++}return null}function ke(e){var t=e.lastElementChild;while(t===a||"none"===t.style.display)if(t=t.previousElementSibling,!t)break;return t||null}function Ie(e,t,a){var r=Ve(ke(a)),i="vertical"===t?e.clientY:e.clientX,n="vertical"===t?e.clientX:e.clientY,o="vertical"===t?r.bottom:r.right,s="vertical"===t?r.left:r.top,l="vertical"===t?r.right:r.bottom,c=10;return"vertical"===t?n>l+c||n<=l&&i>o&&n>=s:i>o&&n>s||i<=o&&n>l+c}function Te(t,a,r,i,n,o,s){var l=Ve(a),c="vertical"===r?t.clientY:t.clientX,u="vertical"===r?l.height:l.width,d="vertical"===r?l.top:l.left,h="vertical"===r?l.bottom:l.right,p=Ve(e),f=!1;if(!o)if(s&&S<u*i)if(!O&&(1===w?c>d+u*n/2:c<h-u*n/2)&&(O=!0),O)f=!0;else{"vertical"===r?p.top:p.left,"vertical"===r?p.bottom:p.right;if(1===w?c<d+S:c>h-S)return-1*w}else if(c>d+u*(1-i)/2&&c<h-u*(1-i)/2)return c>d+u/2?-1:1;return f=f||o,f&&(c<d+u*n/2||c>h-u*n/2)?c>d+u/2?1:-1:0}function Oe(t,a){var r=Ne(e,a.draggable),i=Ne(t,a.draggable);return r<i?1:-1}function Ee(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,a=t.length,r=0;while(a--)r+=t.charCodeAt(a);return r.toString(36)}function Ne(e,t){var a=0;if(!e||!e.parentNode)return-1;while(e&&(e=e.previousElementSibling))"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==r&&a++;return a}function Me(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(a){return!1}return!1}function Re(e,t){return function(){if(!ue){var a=arguments,r=this;ue=j(function(){1===a.length?e.call(r,a[0]):e.apply(r,a),ue=void 0},t)}}}function $e(){clearTimeout(ue),ue=void 0}function Le(e,t){if(e&&t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function je(e){return Y&&Y.dom?Y.dom(e).cloneNode(!0):P?P(e).clone(!0)[0]:e.cloneNode(!0)}function Pe(e){W.length=0;var t=e.getElementsByTagName("input"),a=t.length;while(a--){var r=t[a];r.checked&&W.push(r)}}function Ye(e){return j(e,0)}function Ae(e){return clearTimeout(e)}function Ve(e,t,a){if(e.getBoundingClientRect||e===R){var r,i,n,o,s,l,c;if(e!==R?(r=e.getBoundingClientRect(),i=r.top,n=r.left,o=r.bottom,s=r.right,l=r.height,c=r.width):(i=0,n=0,o=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),a&&e!==R){if(t=t||e.parentNode,!V)do{if(t&&t.getBoundingClientRect&&"none"!==_e(t,"transform")){var u=t.getBoundingClientRect();i-=u.top+L(_e(t,"border-top-width")),n-=u.left+L(_e(t,"border-left-width")),o=i+r.height,s=n+r.width;break}}while(t=t.parentNode);var d=ye(e),h=d&&d.a,p=d&&d.d;d&&(i/=p,n/=h,c/=h,l/=p,o=i+l,s=n+c)}return{top:i,left:n,bottom:o,right:s,width:c,height:l}}}function qe(e,t){var a=te(a,!0),r=Ve(e)[t];while(a){var i,n=Ve(a)[t];if(i="top"===t||"left"===t?r>=n:r<=n,!i)return!0;if(a===R)break;a=te(a,!1)}return!1}return ge($,"dragover",de),ge($,"mousemove",de),ge($,"touchmove",de),he.prototype={constructor:he,_computeIsAligned:function(t){var r;if(a&&!X?(le(),r=$.elementFromPoint(t.clientX,t.clientY),ce()):r=t.target,r=pe(r,this.options.draggable,this.el,!1),!K&&e&&e.parentNode===this.el){for(var i=this.el.children,n=0;n<i.length;n++)pe(i[n],this.options.draggable,this.el,!1)&&i[n]!==r&&(i[n].sortableMouseAligned=Q(t.clientX,t.clientY,i[n],this._getDirection(t,null),this.options));pe(r,this.options.draggable,this.el,!0)||(y=null),K=!0,j(function(){K=!1},30)}},_getDirection:function(t,a){return"function"===typeof this.options.direction?this.options.direction.call(this,t,a,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var a,r=this,i=this.el,n=this.options,s=n.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,h=n.filter;if(Pe(i),(!V||t.artificialBubble||oe(i,u))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||n.disabled)&&!d.isContentEditable)if(u=pe(u,n.draggable,i,!1),u){if(o!==u){if(a=Ne(u,n.draggable),"function"===typeof h){if(h.call(this,t,u,this))return De(r,d,"filter",u,i,i,a),void(s&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=pe(d,e.trim(),i,!1),e)return De(r,e,"filter",u,i,i,a),!0}),h))return void(s&&t.cancelable&&t.preventDefault());n.handle&&!pe(d,n.handle,i,!1)||this._prepareDragStart(t,c,u,a)}}else V&&se(i,t,"_onTapStart")}},_handleAutoScroll:function(t,a){if(e&&this.options.scroll){var r=t.clientX,i=t.clientY,n=$.elementFromPoint(r,i),o=this;if(a||q||V){ae(t,o.options,n,a);var s=te(n,!0);!F||f&&r===m&&i===g||(f&&clearInterval(f),f=setInterval(function(){if(e){var n=te($.elementFromPoint(r,i),!0);n!==s&&(s=n,re(),ae(t,o.options,s,a))}},10),m=r,g=i)}else{if(!o.options.bubbleScroll||te(n,!0)===window)return void re();ae(t,o.options,te(n,!1),!1)}}},_prepareDragStart:function(a,r,s,l){var c,d=this,p=d.el,f=d.options,m=p.ownerDocument;s&&!e&&s.parentNode===p&&(i=p,e=s,t=e.parentNode,n=e.nextSibling,o=s,h=f.group,u=l,v={target:e,clientX:(r||a).clientX,clientY:(r||a).clientY},this._lastX=(r||a).clientX,this._lastY=(r||a).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){d._disableDelayedDrag(),e.draggable=d.nativeDraggable,d._triggerDragStart(a,r),De(d,i,"choose",e,i,i,u),be(e,f.chosenClass,!0)},f.ignore.split(",").forEach(function(t){we(e,t.trim(),Ce)}),f.supportPointer?ge(m,"pointerup",d._onDrop):(ge(m,"mouseup",d._onDrop),ge(m,"touchend",d._onDrop),ge(m,"touchcancel",d._onDrop)),f.delay?(ge(m,"mouseup",d._disableDelayedDrag),ge(m,"touchend",d._disableDelayedDrag),ge(m,"touchcancel",d._disableDelayedDrag),ge(m,"mousemove",d._delayedDragTouchMoveHandler),ge(m,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&ge(m,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=j(c,f.delay)):c())},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;U(G(t.clientX-this._lastX),G(t.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),ve(e,"mouseup",this._disableDelayedDrag),ve(e,"touchend",this._disableDelayedDrag),ve(e,"touchcancel",this._disableDelayedDrag),ve(e,"mousemove",this._delayedDragTouchMoveHandler),ve(e,"touchmove",this._delayedDragTouchMoveHandler),ve(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,a){a=a||("touch"==t.pointerType?t:null),!this.nativeDraggable||a?this.options.supportPointer?ge($,"pointermove",this._onTouchMove):ge($,a?"touchmove":"mousemove",this._onTouchMove):(ge(e,"dragend",this),ge(i,"dragstart",this._onDragStart));try{$.selection?Ye(function(){$.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(t){if(k=!1,i&&e){this.nativeDraggable&&(ge($,"dragover",this._handleAutoScroll),ge($,"dragover",ne));var a=this.options;!t&&be(e,a.dragClass,!1),be(e,a.ghostClass,!0),_e(e,"transform",""),he.active=this,t&&this._appendGhost(),De(this,i,"start",e,i,i,u)}else this._nulling()},_emulateDragOver:function(t){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!t)return;this._lastX=b.clientX,this._lastY=b.clientY,le();var a=$.elementFromPoint(b.clientX,b.clientY),r=a;while(a&&a.shadowRoot)a=a.shadowRoot.elementFromPoint(b.clientX,b.clientY),r=a;if(r)do{var i;if(r[M])if(i=r[M]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:a,rootEl:r}),i&&!this.options.dragoverBubble)break;a=r}while(r=r.parentNode);e.parentNode[M]._computeIsAligned(b),ce()}},_onTouchMove:function(e){if(v){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,n=e.touches?e.touches[0]:e,o=a&&ye(a),s=a&&o&&o.a,l=a&&o&&o.d,c=(n.clientX-v.clientX+i.x)/(s||1),u=(n.clientY-v.clientY+i.y)/(l||1),d=e.touches?"translate3d("+c+"px,"+u+"px,0)":"translate("+c+"px,"+u+"px)";if(!he.active&&!k){if(r&&U(G(n.clientX-this._lastX),G(n.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}this._handleAutoScroll(n,!0),_=!0,b=n,_e(a,"webkitTransform",d),_e(a,"mozTransform",d),_e(a,"msTransform",d),_e(a,"transform",d),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!a){var t=Ve(e,this.options.fallbackOnBody?$.body:i,!0),r=(_e(e),this.options);a=e.cloneNode(!0),be(a,r.ghostClass,!1),be(a,r.fallbackClass,!0),be(a,r.dragClass,!0),_e(a,"box-sizing","border-box"),_e(a,"margin",0),_e(a,"top",t.top),_e(a,"left",t.left),_e(a,"width",t.width),_e(a,"height",t.height),_e(a,"opacity","0.8"),_e(a,"position","fixed"),_e(a,"zIndex","100000"),_e(a,"pointerEvents","none"),r.fallbackOnBody&&$.body.appendChild(a)||i.appendChild(a)}},_onDragStart:function(t,a){var n=this,o=t.dataTransfer,s=n.options;r=je(e),r.draggable=!1,r.style["will-change"]="",this._hideClone(),be(r,n.options.chosenClass,!1),n._cloneId=Ye(function(){n.options.removeCloneOnHide||i.insertBefore(r,e),De(n,i,"clone",e)}),!a&&be(e,s.dragClass,!0),a?(I=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ve($,"mouseup",n._onDrop),ve($,"touchend",n._onDrop),ve($,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(n,o,e)),ge($,"drop",n),_e(e,"transform","translateZ(0)")),k=!0,n._dragStartId=Ye(n._dragStarted.bind(n,a)),ge($,"selectstart",n)},_onDragOver:function(r){var o,s,l,c=this.el,d=r.target,f=this.options,m=f.group,g=he.active,v=h===m,b=f.sort,x=this;if(!z&&(!V||r.rootEl||r.artificialBubble||oe(c,d))){if(void 0!==r.preventDefault&&r.cancelable&&r.preventDefault(),_=!0,d=pe(d,f.draggable,c,!0),pe(r.target,null,e,!0)||d.animated)return B();if(d!==e&&(I=!1),g&&!f.disabled&&(v?b||(l=!i.contains(e)):p===this||(this.lastPutMode=h.checkPull(this,g,e,r))&&m.checkPut(this,g,e,r))){var k=this._getDirection(r,d);if(o=Ve(e),l)return this._hideClone(),t=i,n?i.insertBefore(e,n):i.appendChild(e),B();if(0===c.children.length||c.children[0]===a||Ie(r,k,c)&&!e.animated){if(0!==c.children.length&&c.children[0]!==a&&c===r.target&&(d=ke(c)),d&&(s=Ve(d)),v?g._hideClone():g._showClone(this),!1!==Se(i,c,e,o,d,s,r,!!d))return c.appendChild(e),t=c,C=null,H(),this._animate(o,e),d&&this._animate(s,d),B()}else if(d&&d!==e&&d.parentNode===c){var T,N=0,R=d.sortableMouseAligned,L=e.parentNode!==c,P=qe(d,"vertical"===k?"top":"left");if(y!==d&&(D=null,T=Ve(d)["vertical"===k?"top":"left"],O=!1),ee(e,d,k)&&R||L||P||f.invertSwap||"insert"===D||"swap"===D?("swap"!==D&&(E=f.invertSwap||L||F||P),N=Te(r,d,k,f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,E,y===d),D="swap"):(N=Oe(d,f),D="insert"),0===N)return B();C=null,y=d,w=N,s=Ve(d);var Y=d.nextElementSibling,A=!1;A=1===N;var q=Se(i,c,e,o,d,s,r,A);if(!1!==q)return 1!==q&&-1!==q||(A=1===q),z=!0,j(xe,30),v?g._hideClone():g._showClone(this),A&&!Y?c.appendChild(e):d.parentNode.insertBefore(e,A?Y:d),t=e.parentNode,void 0===T||E||(S=G(T-Ve(d)["vertical"===k?"top":"left"])),H(),!L&&this._animate(s,d),this._animate(o,e),B()}if(c.contains(e))return B()}return V&&!r.rootEl&&se(c,r,"_onDragOver"),!1}function B(){return g&&(be(e,p?p.options.ghostClass:g.options.ghostClass,!1),be(e,f.ghostClass,!0)),p!==x&&x!==he.active?p=x:x===he.active&&(p=null),(d===e&&!e.animated||d===c&&!d.animated)&&(y=null),f.dragoverBubble||r.rootEl||d===$||(x._handleAutoScroll(r),e.parentNode[M]._computeIsAligned(r)),!f.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),!0}function H(){De(x,i,"change",d,c,i,u,Ne(e,f.draggable),r)}},_animate:function(t,a){var r=this.options.animation;if(r){var i=Ve(a);if(a===e&&(C=i),1===t.nodeType&&(t=Ve(t)),t.left+t.width/2!==i.left+i.width/2||t.top+t.height/2!==i.top+i.height/2){var n=ye(this.el),o=n&&n.a,s=n&&n.d;_e(a,"transition","none"),_e(a,"transform","translate3d("+(t.left-i.left)/(o||1)+"px,"+(t.top-i.top)/(s||1)+"px,0)"),a.offsetWidth,_e(a,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),_e(a,"transform","translate3d(0,0,0)")}"number"===typeof a.animated&&clearTimeout(a.animated),a.animated=j(function(){_e(a,"transition",""),_e(a,"transform",""),a.animated=!1},r)}},_offUpEvents:function(){var e=this.el.ownerDocument;ve($,"touchmove",this._onTouchMove),ve($,"pointermove",this._onTouchMove),ve(e,"mouseup",this._onDrop),ve(e,"touchend",this._onDrop),ve(e,"pointerup",this._onDrop),ve(e,"touchcancel",this._onDrop),ve($,"selectstart",this)},_onDrop:function(o){var s=this.el,l=this.options;k=!1,F=!1,E=!1,O=!1,clearInterval(this._loopId),clearInterval(f),re(),$e(),clearTimeout(this._dragStartTimer),Ae(this._cloneId),Ae(this._dragStartId),ve($,"mousemove",this._onTouchMove),this.nativeDraggable&&(ve($,"drop",this),ve(s,"dragstart",this._onDragStart),ve($,"dragover",this._handleAutoScroll),ve($,"dragover",ne)),this._offUpEvents(),o&&(_&&(o.cancelable&&o.preventDefault(),!l.dropBubble&&o.stopPropagation()),a&&a.parentNode&&a.parentNode.removeChild(a),(i===t||p&&"clone"!==p.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),e&&(this.nativeDraggable&&ve(e,"dragend",this),Ce(e),e.style["will-change"]="",be(e,p?p.options.ghostClass:this.options.ghostClass,!1),be(e,this.options.chosenClass,!1),De(this,i,"unchoose",e,t,i,u,null,o),i!==t?(d=Ne(e,l.draggable),d>=0&&(De(null,t,"add",e,t,i,u,d,o),De(this,i,"remove",e,t,i,u,d,o),De(null,t,"sort",e,t,i,u,d,o),De(this,i,"sort",e,t,i,u,d,o)),p&&p.save()):e.nextSibling!==n&&(d=Ne(e,l.draggable),d>=0&&(De(this,i,"update",e,t,i,u,d,o),De(this,i,"sort",e,t,i,u,d,o))),he.active&&(null!=d&&-1!==d||(d=u),De(this,i,"end",e,t,i,u,d,o),this.save()))),this._nulling()},_nulling:function(){i=e=t=a=n=r=o=s=l=x.length=f=m=g=v=b=_=d=u=y=w=C=p=h=he.active=null,W.forEach(function(e){e.checked=!0}),W.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),me(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var e,t=[],a=this.el.children,r=0,i=a.length,n=this.options;r<i;r++)e=a[r],pe(e,n.draggable,this.el,!1)&&t.push(e.getAttribute(n.dataIdAttr)||Ee(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,r){var i=a.children[r];pe(i,this.options.draggable,a,!1)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return pe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var a=this.options;if(void 0===t)return a[e];a[e]=t,"group"===e&&ie(a)},destroy:function(){var e=this.el;e[M]=null,ve(e,"mousedown",this._onTapStart),ve(e,"touchstart",this._onTapStart),ve(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ve(e,"dragover",this),ve(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),T.splice(T.indexOf(this.el),1),this.el=e=null},_hideClone:function(){r.cloneHidden||(_e(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(t){"clone"===t.lastPutMode?r.cloneHidden&&(i.contains(e)&&!this.options.group.revertClone?i.insertBefore(r,e):n?i.insertBefore(r,n):i.appendChild(r),this.options.group.revertClone&&this._animate(e,r),_e(r,"display",""),r.cloneHidden=!1):this._hideClone()}},ge($,"touchmove",function(e){(he.active||k)&&e.cancelable&&e.preventDefault()}),he.utils={on:ge,off:ve,css:_e,find:we,is:function(e,t){return!!pe(e,t,e,!1)},extend:Le,throttle:Re,closest:pe,toggleClass:be,clone:je,index:Ne,nextTick:Ye,cancelNextTick:Ae,detectDirection:J,getChild:Fe},he.create=function(e,t){return new he(e,t)},he.version="1.8.3",he})},"55dd":function(e,t,a){"use strict";var r=a("5ca1"),i=a("d8e8"),n=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];r(r.P+r.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(n(this)):s.call(n(this),i(e))}})},"5dbc":function(e,t,a){var r=a("d3f4"),i=a("8b97").set;e.exports=function(e,t,a){var n,o=t.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&r(n)&&i&&i(e,n),e}},"5f89":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{title:"制作报表",bordered:!1}}),a("div",{staticClass:"reportmaking"},[a("a-card",{staticClass:"padding0",attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:e.current}},[a("a-step",{attrs:{title:"填写库信息"}}),a("a-step",{attrs:{title:"配置操作"}})],1),a("div",{staticClass:"content"},[a("keep-alive",[0===e.current?a("step1",{attrs:{dataSourceList:e.dataSourceList},on:{reportId:e.reportIdEmit,nextStep:function(t){return e.nextStep()}}}):e._e()],1),1===e.current?a("step2",{attrs:{reportId:e.reportId},on:{prevStep:e.prevStep}}):e._e()],1)],1)],1)],1)},i=[],n=a("d4ec"),o=a("bee2"),s=a("99de"),l=a("7e84"),c=a("262e"),u=(a("cadf"),a("551c"),a("097d"),a("9ab4")),d=a("60a3"),h=a("4bb5"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-spin",{attrs:{spinning:e.spinning,delayTime:"500"}},[a("a-form",{staticStyle:{"max-width":"800px",margin:"40px auto 0"},attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"报表名称",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["reportName",{rules:[{required:!0,message:"请输入报表名称"}]}],expression:"['reportName', { rules: [{ required: true, message: '请输入报表名称' }]}]"}],ref:"reportName",attrs:{placeholder:"报表名称"}})],1),a("a-form-item",{attrs:{label:"数据源",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[e.dataSourceList?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["reportResourceId",{initialValue:e.reportResourceId,rules:[{required:!0,message:"请选择数据源"}]}],expression:"['reportResourceId', { initialValue: reportResourceId, rules: [{ required: true, message: '请选择数据源' }]}]"}],ref:"reportResourceId",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,disabled:e.disabledReportResource||e.disabledForm,placeholder:"请选择数据源"},on:{change:e.dataSourceSelectChange}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择数据源")]),e._l(e.dataSourceList,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.report_source_id}},[e._v(e._s(t.link_name))])})],2):e._e()],1),a("a-form-item",{attrs:{label:"数据主表",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainTableId",{initialValue:e.dataSourceSelect,rules:[{required:!0,message:"请选择数据主表"}]}],expression:"['mainTableId', { initialValue: dataSourceSelect, rules: [{ required: true, message: '请选择数据主表' }]}]"}],ref:"mainTableId",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,disabled:e.selectDisabled||e.disabledForm,placeholder:"数据主表"},on:{change:e.mainTableIdChange}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择数据主表")]),e._l(e.dataTab,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1),a("a-form-item",{attrs:{label:"关联表",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-button",{ref:"joinArr",attrs:{type:"primary",disabled:e.joinBtnDis||e.disabledForm},on:{click:e.showModel}},[e._v(" + ")])],1),a("a-form-item",{attrs:{wrapperCol:{span:15,offset:5}}},[e._l(e.aTagDatas,function(t,r){return[a("a-tag",{key:r,attrs:{closable:r+1===e.aTagDatas.length&&e.aTagDisabled,afterClose:function(){return e.aTagClose(r)},color:"blue"}},[e._v("关联表："+e._s(t.joinTableName))])]})],2),a("a-form-item",{attrs:{wrapperCol:{span:15,offset:5}}},[a("a-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)],1),a("a-modal",{attrs:{visible:e.visible,title:e.title,okText:"确认",cancelText:"取消"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{ref:"collectionForm",attrs:{form:e.modelForm}},[a("a-form-item",{attrs:{label:"关联表",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["joinTableId",{rules:[{required:!0,message:"请选择关联表"}]}],expression:"['joinTableId', { rules: [{ required: true, message: '请选择关联表' }]}]"}],ref:"joinTableId",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,placeholder:"选择关联表"},on:{change:e.joinTableIdSelectChange}},[a("a-select-option",{attrs:{value:""}},[e._v("选择关联表")]),e._l(e.dataTab,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1),a("a-form-item",{attrs:{label:"关联字段",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["joinFieldId",{rules:[{required:!0,message:"请选择字段"}]}],expression:"['joinFieldId', {  rules: [{ required: true, message: '请选择字段' }]}]"}],ref:"joinFieldId",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,disabled:e.joinTabFiledSelectDis,placeholder:"选择关联表字段"}},[a("a-select-option",{attrs:{value:""}},[e._v("选择关联表字段")]),e._l(e.joinMainFieldIds,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.field_title+"/"+t.field_name))])})],2)],1),a("a-form-item",{attrs:{label:"数据主表",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainTableId",{rules:[{required:!0,message:"请选择字段"}]}],expression:"['mainTableId', { rules: [{ required: true, message: '请选择字段' }]}]"}],ref:"mainTableIdModel",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,placeholder:"请选择数据主表"},on:{change:e.modalDataZB}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择数据主表")]),e._l(e.mainTableIdModel,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1),a("a-form-item",{attrs:{label:"主表字段",labelCol:e.modelCol.label,wrapperCol:e.modelCol.wrapper}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainFieldId",{rules:[{required:!0,message:"请选择主表字段"}]}],expression:"['mainFieldId', { rules: [{ required: true, message: '请选择主表字段' }]}]"}],ref:"mainFieldId",attrs:{allowClear:"",showSearch:"",filterOption:e.filterOption,disabled:e.zbFiledSelectDis,placeholder:"选择主表字段"}},[a("a-select-option",{attrs:{value:""}},[e._v("选择主表字段")]),e._l(e.zbFieldIds,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.field_title+"/"+t.field_name))])})],2)],1)],1)],1)],1)},f=[],m=(a("ac6a"),a("f751"),a("ff1a")),g=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.spinning=!0,e.modelCol={label:{span:5},wrapper:{span:15}},e.selectDisabled=!0,e.joinTabFiledSelectDis=!0,e.zbFiledSelectDis=!0,e.dataTab=[],e.aTagDatas=[],e.joinArr=[],e.visible=!1,e.joinBtnDis=!0,e.mainTabIdsArr=[],e.madinTabId=0,e.mainTableIdModel=[],e.joinMainFieldIds=[],e.zbFieldIds=[],e.reportId="",e.reportName="",e.reportResourceId=Object(m["b"])("reportResourceId")?Object(m["b"])("reportResourceId"):"",e.disabledForm=!1,e.aTagDisabled=!0,e.disabledReportResource=!1,e.title="新增关联表",e.dataSourceSelect="",e}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"send",value:function(e){}},{key:"beforeCreate",value:function(){this.form=this.$form.createForm(this),this.modelForm=this.$form.createForm(this)}},{key:"created",value:function(){var e=this,t=Object(m["b"])("reportId");t?(this.$post("custom/ReportManage/getReportMainInfo",{reportId:t}).then(function(t){2e3===t.state?(e.selectDisabled=!1,e.joinBtnDis=!1,e.dataSourceSelect=t.data.mainTableId,e.dataSourceSelectChange(t.data.reportResourceId),e.madinTabId=t.data.mainTableId,e.form.setFieldsValue({reportName:t.data.reportName,reportResourceId:t.data.reportResourceId}),e.aTagDatas=t.data.joinArr,e.joinArr=Object.assign(e.joinArr,t.data.joinArr),e.spinning=!1):(e.spinning=!1,e.$message.error(t.message,3))}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("请求失败",3),e.spinning=!1}),this.disabledForm=!0,this.aTagDisabled=!1):(this.reportResourceId&&(this.$nextTick(function(){e.form.setFieldsValue({reportResourceId:+e.reportResourceId})}),this.disabledReportResource=!0,this.dataSourceSelectChange(+this.reportResourceId)),this.spinning=!1)}},{key:"dataSourceSelectChange",value:function(e){var t=this;e&&this.$post("custom/Modelcon/getModelBySourceId",{report_source_id:e}).then(function(e){2e3===e.state?(t.selectDisabled=!1,t.dataTab=e.data,t.modelForm.resetFields(["mainTableId"])):(t.dataTab=[],t.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code&&t.$message.error("请求超时",3),t.dataTab=[],t.$message.error("请求失败",3)})}},{key:"mainTableIdChange",value:function(e){e?(this.joinBtnDis=!1,this.madinTabId=e):this.joinBtnDis=!0}},{key:"joinTableIdSelectChange",value:function(e){var t=this;e&&this.$get("custom/Attribute/getFileldsByModelId",{model_id:e}).then(function(e){2e3===e.state?(t.joinTabFiledSelectDis=!1,t.joinMainFieldIds=e.data,t.modelForm.resetFields(["joinFieldId"])):(t.joinMainFieldIds=[],t.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code?t.$message.error("请求超时",3):t.$message.error("请求失败",3)})}},{key:"modalDataZB",value:function(e){var t=this;e&&this.$get("custom/Attribute/getFileldsByModelId",{model_id:e}).then(function(e){2e3===e.state?(t.zbFiledSelectDis=!1,t.zbFieldIds=e.data,t.modelForm.resetFields(["mainFieldId"])):(t.zbFieldIds=[],t.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code?t.$message.error("请求超时",3):t.$message.error("请求失败",3)})}},{key:"aTagClose",value:function(e){this.aTagDatas.splice(e,1),this.joinArr.pop()}},{key:"nextStep",value:function(){var e=this;this.form.validateFields(function(t,a){t||(a.joinArr=e.joinArr,Object(m["b"])("reportId")&&(a.type="edit",a.reportId=Object(m["b"])("reportId")),e.$post("custom/ReportManage/saveStepOne",a).then(function(t){2e3===t.state?(e.reportId=t.data.reportId,e.send(e.reportId),e.$emit("nextStep")):e.$message.error(t.message,3)}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("请求失败",3)}))})}},{key:"showModel",value:function(){var e=this;this.visible=!0,this.dataTab.forEach(function(t,a){t.id===e.madinTabId&&-1===JSON.stringify(e.mainTableIdModel).indexOf(JSON.stringify(t))&&e.mainTableIdModel.push(t)})}},{key:"handleCancel",value:function(){this.visible=!1,this.joinTabFiledSelectDis=!0,this.zbFiledSelectDis=!0,this.modelForm.resetFields()}},{key:"handleCreate",value:function(e){var t=this;e.preventDefault(),this.modelForm.validateFields(function(e,a){if(!e){t.joinArr.push(a);var r=a.joinTableId;t.dataTab.forEach(function(e,i){if(r===e.id){var n=Object.assign({joinTableName:e.title},a);t.aTagDatas.push(n)}}),t.joinTabFiledSelectDis=!0,t.zbFiledSelectDis=!0,t.modelForm.resetFields(),t.visible=!1}})}},{key:"filterOption",value:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}]),t}(d["d"]);u["a"]([Object(d["c"])({})],g.prototype,"dataSourceList",void 0),u["a"]([Object(d["b"])("reportId")],g.prototype,"send",null),g=u["a"]([d["a"]],g);var v=g,b=v,_=(a("702d"),a("2877")),y=Object(_["a"])(b,p,f,!1,null,"1a59a61e",null),w=y.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-spin",{attrs:{spinning:e.spinning,delayTime:"500"}},[a("div",{staticClass:"lpc-step2-content"},[a("left-menu",{attrs:{dataSourceTree:e.dataSourceTree},on:{treeDblData:e.treeMsg}}),a("div",{staticClass:"lpc-centerTab"},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"apple"}}),e._v("报表设置")],1),a("div",{staticClass:"lpc-tab1-content"},[a("div",{staticClass:"tab1-top"},[a("div",{staticClass:"tab1-top-header"},[a("h4",[e._v("分组")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("删除所有分组")])]),a("a-icon",{attrs:{type:"delete"},on:{click:function(t){return t.stopPropagation(),e.deleteAllGroup("hang")}}})],2)],1),a("div",{staticClass:"tab1-top-content"},[a("h4",[e._v("组行")]),e.spinning?e._e():a("a-select",{ref:"handleChangeH",staticStyle:{width:"100%"},attrs:{showSearch:"",allowClear:"",placeholder:"添加组行",filterOption:e.filterOption},on:{change:e.handleChangeH}},e._l(e.treeListFilter,function(t,r){return a("a-select-option",{key:r,class:t.children?"disabled":"",attrs:{disabled:!!t.children,value:t.id}},[t.children?a("a-icon",{attrs:{type:"smile",theme:"twoTone"}}):e._e(),e._v(e._s(t.title))],1)}),1),a("div",{staticClass:"task-content"},[a("draggable",{staticClass:"hang",attrs:{options:e.dragOptions},on:{update:e.onEndHang},model:{value:e.hangData,callback:function(t){e.hangData=t},expression:"hangData"}},e._l(e.hangData,function(t,r){return a("p",{key:"hang"+r,staticClass:"task-item",attrs:{type:"inner",title:t.text}},[t.title.length>15?a("span",[e._v(e._s(t.title.substr(0,15))+"...")]):a("span",[e._v(e._s(t.title))]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[e._v("删除")])]),a("a-icon",{attrs:{type:"close"},on:{click:function(a){return a.stopPropagation(),e.deleteGroupH(t,r)}}})],2)],1)}),0)],1)],1)]),a("a-divider"),a("div",{staticClass:"tab1-bottom"},[a("div",{staticClass:"tab1-bottom-header"},[a("h4",[e._v("列数")]),a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[a("a-icon",{attrs:{type:"down-square"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",attrs:{disabled:!e.hangData.length},on:{click:e.showFormulaModel}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("添加汇总公式")])]),a("a-menu-divider"),a("a-menu-item",{key:"3",on:{click:function(t){return e.deleteAllGroup("lie")}}},[e._v("删除所有列")])],1)],1)],1),e.spinning?e._e():a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",showSearch:"",placeholder:"添加组列",optionFilterProp:"children",filterOption:e.filterOption},on:{change:e.handleChangeL}},e._l(e.treeListFilter,function(t,r){return a("a-select-option",{key:r,class:t.children?"disabled":"",attrs:{disabled:!!t.children,value:t.id}},[t.children?a("a-icon",{attrs:{type:"smile",theme:"twoTone"}}):e._e(),e._v(e._s(t.title))],1)}),1),a("div",{staticClass:"task-content"},[a("draggable",{staticClass:"lie",attrs:{options:e.dragOptions},on:{update:e.onEndLie},model:{value:e.lieData,callback:function(t){e.lieData=t},expression:"lieData"}},e._l(e.lieData,function(t,r){return a("p",{key:"lie"+r,staticClass:"task-item",attrs:{type:"inner"}},[t.title.length>15?a("span",[e._v(e._s(t.title.substr(0,15))+"...")]):a("span",[e._v(e._s(t.title))]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[e._v("删除")])]),a("a-icon",{attrs:{type:"close"},on:{click:function(a){return a.stopPropagation(),e.deleteGroupL(t,r)}}})],2)],1)}),0)],1)],1),a("a-divider"),a("div",{staticClass:"tab1-top"},[a("div",{staticClass:"tab1-top-header"},[a("h4",[e._v("排序")]),a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[a("a-icon",{attrs:{type:"down-square"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",attrs:{disabled:!e.sortData.length},on:{click:function(t){return e.sortingFun("asc")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("升序")])]),a("a-menu-item",{key:"2",attrs:{disabled:!e.sortData.length},on:{click:function(t){return e.sortingFun("desc")}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("降序")])]),a("a-menu-divider"),a("a-menu-item",{key:"3",on:{click:function(t){return e.deleteAllGroup("sort")}}},[e._v("删除所有排序")])],1)],1)],1),a("div",{staticClass:"tab1-top-content"},[e.spinning?e._e():a("a-select",{ref:"handleChangeSort",staticStyle:{width:"100%"},attrs:{showSearch:"",allowClear:"",placeholder:"添加排序",filterOption:e.filterOption},on:{change:e.handleChangeSort}},e._l(e.treeListFilter,function(t,r){return a("a-select-option",{key:r,class:t.children?"disabled":"",attrs:{disabled:!!t.children,value:t.id}},[t.children?a("a-icon",{attrs:{type:"smile",theme:"twoTone"}}):e._e(),e._v(e._s(t.title))],1)}),1),a("div",{staticClass:"task-content"},[a("draggable",{staticClass:"sort",attrs:{options:e.dragOptions},on:{update:e.onEndSort},model:{value:e.sortData,callback:function(t){e.sortData=t},expression:"sortData"}},e._l(e.sortData,function(t,r){return a("p",{key:"sort"+r,staticClass:"task-item",attrs:{type:"inner",title:t.text}},[a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},["asc"===t.sortType?a("span",[e._v("正序")]):a("span",[e._v("倒序")])]),a("a-icon",{class:{asc:"asc"===t.sortType,desc:"desc"===t.sortType},attrs:{type:"asc"===t.sortType?"arrow-up":"arrow-down"},on:{click:function(a){return a.stopPropagation(),e.sortingToggleFun(t,r)}}})],2),t.title.length>15?a("span",[e._v(e._s(t.title.substr(0,15))+"...")]):a("span",[e._v(e._s(t.title))]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[e._v("删除")])]),a("a-icon",{attrs:{type:"close"},on:{click:function(a){return a.stopPropagation(),e.deleteGroupSort(t,r)}}})],2)],1)}),0)],1)],1)])],1)]),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"android"}}),e._v("筛选")],1),a("div",{staticClass:"lpc-tab2-content"},[a("div",{staticClass:"tab2-top-header"},[a("h4",[e._v("固定筛选器")])]),e.spinning?e._e():a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",showSearch:"",placeholder:"添加固有筛选",optionFilterProp:"children",filterOption:e.filterOption},on:{change:e.handleChangeF}},e._l(e.treeListFilter,function(t,r){return a("a-select-option",{key:r,class:t.children?"disabled":"",attrs:{disabled:!!t.children,value:t.id}},[t.children?a("a-icon",{attrs:{type:"smile",theme:"twoTone"}}):e._e(),e._v(e._s(t.title))],1)}),1),a("div",{staticClass:"screening-content"},[a("draggable",{staticClass:"fixSearch",attrs:{options:e.dragOptions},on:{update:e.onEndFixSearch},model:{value:e.fixSearchData,callback:function(t){e.fixSearchData=t},expression:"fixSearchData"}},e._l(e.fixSearchData,function(t,r){return a("a-popover",{key:"fixSearch"+r,attrs:{arrowPointAtCenter:"",placement:"right",title:"编辑筛选器",trigger:"click",visible:t.popover},on:{visibleChange:e.visibleChangeFun},model:{value:t.popover,callback:function(a){e.$set(t,"popover",a)},expression:"item.popover"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(t.title))]),"date"==t.field_type?a("div",[a("a-form",{attrs:{form:e.dataForm}},[a("a-form-item",{attrs:{label:"时间范围"}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{type:"array",required:!0,message:"请选择时间！"}]}],expression:"['search_param', { initialValue: item.search_param, rules: [{ type: 'array', required: true, message: '请选择时间！' }]}]"}],attrs:{size:"small",format:"YYYY-MM-DD"}})],1)],1)],1):e._e(),"datetime"==t.field_type?a("div",[a("a-form",{attrs:{form:e.datetimeForm}},[a("a-form-item",{attrs:{label:"时间范围"}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{type:"array",required:!0,message:"请选择时间！"}]}],expression:"['search_param', { initialValue: item.search_param, rules: [{ type: 'array', required: true, message: '请选择时间！' }]}]"}],attrs:{size:"small",showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"}})],1)],1)],1):e._e(),"num"==t.field_type?a("div",[a("a-form",{attrs:{form:e.numberForm}},[a("a-form-item",{attrs:{label:"运算符"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_logic",{initialValue:t.search_logic,rules:[{required:!1}]}],expression:"['search_logic', { initialValue: item.search_logic, rules: [{ required: false }]}]"}],attrs:{labelInValue:""}},[a("a-select-option",{attrs:{value:"="}},[e._v("等于")]),a("a-select-option",{attrs:{value:"!="}},[e._v("不等于")]),a("a-select-option",{attrs:{value:"<"}},[e._v("小于")]),a("a-select-option",{attrs:{value:">"}},[e._v("大于")]),a("a-select-option",{attrs:{value:"<="}},[e._v("小于等于")]),a("a-select-option",{attrs:{value:">="}},[e._v("大于等于")])],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{required:!1,message:"请输入数字！"}]}],expression:"['search_param', { initialValue: item.search_param, rules: [{ required: false, message: '请输入数字！' }]}]"}]})],1)],1)],1):e._e(),"string"==t.field_type?a("div",[a("a-form",{attrs:{form:e.stringForm}},[a("a-form-item",{attrs:{label:"运算符"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_logic",{initialValue:t.search_logic,rules:[{required:!1}]}],expression:"['search_logic', { initialValue: item.search_logic, rules: [{ required: false }]}]"}],attrs:{labelInValue:""}},[a("a-select-option",{attrs:{value:"="}},[e._v("等于")]),a("a-select-option",{attrs:{value:"!="}},[e._v("不等于")]),a("a-select-option",{attrs:{value:"like"}},[e._v("包含")]),a("a-select-option",{attrs:{value:"not like"}},[e._v("不包含")])],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{required:!1,message:"请输入字符串！"}]}],expression:"['search_param', { initialValue: item.search_param, rules: [{ required: false, message: '请输入字符串！' }]}]"}]})],1)],1)],1):e._e(),"select"==t.field_type?a("div",[a("a-form",{attrs:{form:e.selectForm}},[a("a-form-item",{attrs:{label:"运算符"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_logic",{initialValue:t.search_logic,rules:[{required:!1}]}],expression:"['search_logic', { initialValue: item.search_logic, rules: [{ required: false }]}]"}],staticStyle:{width:"250px"},attrs:{labelInValue:""}},[a("a-select-option",{attrs:{value:"="}},[e._v("等于")]),a("a-select-option",{attrs:{value:"!="}},[e._v("不等于")])],1)],1),a("a-form-item",{attrs:{label:"值"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{required:!1,message:"请选择值！"}]}],expression:"['search_param', { initialValue: item.search_param, rules: [{ required: false, message: '请选择值！' }]}]"}],staticStyle:{width:"250px"},attrs:{labelInValue:"",showSearch:"",allowClear:"",filterOption:e.filterOption}},[a("a-select-option",{attrs:{value:"0"}},[e._v("同步中")]),a("a-select-option",{attrs:{value:"1"}},[e._v("不同")]),a("a-select-option",{attrs:{value:"2"}},[e._v("已审核")]),a("a-select-option",{attrs:{value:"3"}},[e._v("未找到")]),a("a-select-option",{attrs:{value:"4"}},[e._v("未启用")]),a("a-select-option",{attrs:{value:"5"}},[e._v("未比较")]),a("a-select-option",{attrs:{value:""}},[e._v("无选择")])],1)],1)],1)],1):e._e(),"checkbox"==t.field_type?a("div",[a("a-form",{attrs:{form:e.checkboxForm}},[a("a-form-item",{attrs:{label:"运算符"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_logic",{initialValue:t.search_logic,rules:[{required:!1}]}],expression:"['search_logic', { initialValue: item.search_logic, rules: [{ required: false }]}]"}],staticStyle:{width:"250px"},attrs:{labelInValue:""}},[a("a-select-option",{attrs:{value:"in"}},[e._v("等于")]),a("a-select-option",{attrs:{value:"not in"}},[e._v("不等于")])],1)],1),a("a-form-item",{attrs:{label:"值"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["search_param",{initialValue:t.search_param,rules:[{required:!1,message:"请选择值！"}]}],expression:"['search_param', { initialValue: item.search_param,  rules: [{ required: false, message: '请选择值！' }]}]"}],staticStyle:{width:"250px"},attrs:{labelInValue:"",mode:"multiple",showSearch:"",allowClear:"",filterOption:e.filterOption}},[a("a-select-option",{attrs:{value:"0"}},[e._v("同步中")]),a("a-select-option",{attrs:{value:"1"}},[e._v("不同")]),a("a-select-option",{attrs:{value:"2"}},[e._v("已审核")]),a("a-select-option",{attrs:{value:"3"}},[e._v("未找到")]),a("a-select-option",{attrs:{value:"4"}},[e._v("未启用")]),a("a-select-option",{attrs:{value:"5"}},[e._v("未比较")])],1)],1)],1)],1):e._e(),a("div",{staticClass:"content-footer"},[a("a-button",{attrs:{size:"small"},on:{click:function(a){return e.hidePopover(t,r,"F")}}},[e._v("取消")]),a("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.enterPopover(t,"F")}}},[e._v("应用")])],1)]),a("div",{staticClass:"screening-item",class:{active_item:t.popover}},[a("div",{staticClass:"lpc-fixed-text"},[a("p",{staticClass:"title"},[e._v(e._s(t.title))]),a("p",{staticClass:"text"},[e._v(e._s(t.extra))])]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[e._v("删除")])]),a("a-icon",{attrs:{type:"close"},on:{click:function(t){return t.stopPropagation(),e.deleteSearch(r,"F")}}})],2)],1)])}),1)],1),a("a-divider"),a("div",{staticClass:"tab2-top-header"},[a("h4",[e._v("显示筛选器")])]),e.spinning?e._e():a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",allowClear:"",placeholder:"添加显示筛选",optionFilterProp:"children",filterOption:e.filterOption},on:{change:e.handleChangeX}},e._l(e.treeListFilter,function(t,r){return a("a-select-option",{key:r,class:t.children?"disabled":"",attrs:{disabled:!!t.children,value:t.id}},[t.children?a("a-icon",{attrs:{type:"smile",theme:"twoTone"}}):e._e(),e._v(e._s(t.title))],1)}),1),a("div",{staticClass:"According-content"},[a("draggable",{staticClass:"showSearch",attrs:{options:e.dragOptions},on:{update:e.onEndShowSearch},model:{value:e.showSearchData,callback:function(t){e.showSearchData=t},expression:"showSearchData"}},e._l(e.showSearchData,function(t,r){return a("p",{key:r,staticClass:"task-item",attrs:{type:"inner"}},[t.title.length>15?a("span",[e._v(e._s(t.title.substr(0,15))+"...")]):a("span",[e._v(e._s(t.title))]),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[e._v("删除")])]),a("a-icon",{attrs:{type:"close"},on:{click:function(t){return t.stopPropagation(),e.deleteSearch(r,"X")}}})],2)],1)}),0)],1)],1)])],1)],1),a("div",{staticClass:"lpc-rightTable"},[a("div",{staticClass:"table-header"},[a("div",{staticClass:"table-header-left"}),a("div",{staticClass:"table-header-right"},[a("a-button",{staticClass:"runBtn",attrs:{type:"primary",loading:e.runLoading},on:{click:e.runFun}},[e._v("运行")])],1)]),e.search.length?a("div",{staticClass:"tabSearch",staticStyle:{padding:"10px"},attrs:{id:"components-form-demo-advanced-search"}},[a("a-form",{staticClass:"ant-advanced-search-from",attrs:{layout:"inline",form:e.form},on:{submit:e.handleSearch}},[a("a-row",{attrs:{gutter:24}},e._l(e.search,function(t,r){return a("a-col",{key:r,attrs:{span:8}},[a("a-form-item",["string"===t.searchType?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{placeholder:t.showTitle}}):e._e(),"num"===t.searchType?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{placeholder:t.showTitle}}):e._e(),"select"===t.searchType?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{showSearch:"",allowClear:"",filterOption:e.filterOption,placeholder:t.showTitle}},e._l(t.searchParam,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.title))])}),1):e._e(),"checkbox"===t.searchType?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{mode:"multiple",showSearch:"",allowClear:"",filterOption:e.filterOption,placeholder:t.showTitle}},e._l(t.searchParam,function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.title))])}),1):e._e(),"date"===t.searchType?a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{placeholder:[t.showTitle+"开始",t.showTitle+"结束"],format:"YYYY-MM-DD"}}):e._e(),"datetime"===t.searchType?a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.searchName,{rules:[{required:!1}]}],expression:"[item.searchName, { rules: [{ required: false}] }]"}],attrs:{placeholder:[t.showTitle+"开始",t.showTitle+"结束"],showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"}}):e._e()],1)],1)}),1),a("a-row",[a("a-col",{style:{textAlign:"right"},attrs:{span:24}},[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.searchLoading}},[e._v("搜索")]),a("a-button",{style:{marginLeft:"8px"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1):e._e(),a("div",{ref:"tableContent",staticClass:"table-content"},[e.columns.length>0?a("a-table",{attrs:{pagination:e.pagination,loading:e.tableLoading,columns:e.columns,dataSource:e.data,bordered:"",scroll:e.screenWidth,rowKey:function(e){return e.keyFlagId}},on:{change:e.onChangeTab}}):a("div",{staticClass:"noneIcon"},[a("div",[a("a-icon",{attrs:{type:"table"}}),a("p",[e._v("暂无数据")])],1)])],1)])],1),a("a-form",{staticClass:"lpc-form-footer"},[a("a-form-item",[a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.prevStep}},[e._v("上一步")])],1)],1)],1),a("a-modal",{staticClass:"formulaModal",attrs:{visible:e.showFormulaFlag,title:e.showFormulaTitle,confirmLoading:e.formulaCreateLoading,okText:"确认",cancelText:"取消"},on:{cancel:e.formulaCancel,ok:e.formulaCreate}},[a("div",{staticClass:"modalContent"},[a("div",{staticClass:"modalLeftTab"},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"字段"}},[a("div",{staticClass:"leftMenu"},[a("div",{staticClass:"lpc-full"},[a("div",{staticClass:"header"},[a("a-input-search",{attrs:{placeholder:"搜索字段"},on:{change:e.onChangeField}})],1),a("div",{staticClass:"treeContent"},[a("a-tree",{attrs:{expandedKeys:e.expandedKeysField,autoExpandParent:e.autoExpandParentField,treeData:e.dataSourceTree},on:{expand:e.onExpandField,select:e.onselectTreeField},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.title;return[r.indexOf(e.searchValueField)>-1?a("span",[e._v("\n                          "+e._s(r.substr(0,r.indexOf(e.searchValueField)))+"\n                          "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValueField))]),e._v("\n                          "+e._s(r.substr(r.indexOf(e.searchValueField)+e.searchValueField.length))+"\n                        ")]):a("span",[e._v(e._s(r))])]}}])})],1),a("div",{staticClass:"footer"},[a("div",[a("a-select",{staticStyle:{width:"170px"},model:{value:e.fieldCalculate,callback:function(t){e.fieldCalculate=t},expression:"fieldCalculate"}},[a("a-select-option",{attrs:{value:""}},[e._v("无")]),a("a-select-option",{attrs:{value:"SUM"}},[e._v("总和")]),a("a-select-option",{attrs:{value:"AVG"}},[e._v("平均")]),a("a-select-option",{attrs:{value:"MIN"}},[e._v("最小值")]),a("a-select-option",{attrs:{value:"MAX"}},[e._v("最大值")])],1),a("a-button",{attrs:{type:"primary",disabled:e.insertField},on:{click:e.insertFieldFun}},[e._v("插入 > ")])],1)])])])]),a("a-tab-pane",{key:"2",attrs:{tab:"函数"}},[a("a-spin",{attrs:{spinning:e.systeming,delayTime:"500",size:"small"}},[a("div",{staticClass:"leftMenu"},[a("div",{staticClass:"lpc-full"},[a("div",{staticClass:"header"},[a("a-input-search",{attrs:{placeholder:"搜索函数"},on:{change:e.onChangeFun}})],1),a("div",{staticClass:"treeContent",class:e.funcTree?"funcTree":""},[a("a-tree",{attrs:{expandedKeys:e.expandedKeysFun,autoExpandParent:e.autoExpandParentFun,treeData:e.funcTreeData},on:{expand:e.onExpandFun,select:e.onSelectTreeFun},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.title;return[r.indexOf(e.searchValueFun)>-1?a("span",[e._v("\n                            "+e._s(r.substr(0,r.indexOf(e.searchValueFun)))+"\n                            "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValueFun))]),e._v("\n                            "+e._s(r.substr(r.indexOf(e.searchValueFun)+e.searchValueFun.length))+"\n                          ")]):a("span",[e._v(e._s(r))])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.funcTree,expression:"funcTree"}],staticClass:"funcTreeMessage"},[e.funData.func_sample?a("p",{staticStyle:{"font-weight":"700"},attrs:{title:e.funData.func_sample}},[e._v(e._s(e.funData.func_sample))]):e._e(),e.funData.func_desc.length>60?a("p",{attrs:{title:e.funData.func_desc}},[e._v(e._s(e.funData.func_desc.substr(0,60))+"...")]):a("p",{attrs:{title:e.funData.func_desc}},[e._v(e._s(e.funData.func_desc))])]),a("div",{staticClass:"footer"},[a("div",[a("a-button",{staticStyle:{"margin-left":"191px"},attrs:{type:"primary",disabled:e.insertFun},on:{click:e.insertFunFun}},[e._v("插入 > ")])],1)])])])])],1)],1)],1),a("div",{staticClass:"modalRightTab"},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"一般信息"}},[a("div",{staticClass:"message"},[a("a-form",{attrs:{layout:"vertical",form:e.messageForm}},[a("a-form-item",{staticClass:"twoCol",attrs:{label:"列名称","wrapper-col":{span:24}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["col_title",{rules:[{required:!0,message:"请输入列名称！"}]}],expression:"['col_title', {rules: [{ required: true, message: '请输入列名称！' }]}]"}],attrs:{name:"col_title"}})],1),a("a-form-item",{staticClass:"twoCol",staticStyle:{"margin-left":"20px"},attrs:{label:"描述","wrapper-col":{span:24}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["col_desc",{initialValue:"",rules:[{required:!1}]}],expression:"['col_desc', { initialValue: '', rules: [{ required: false }]}]"}],attrs:{name:"col_desc"}})],1),a("a-form-item",{staticStyle:{margin:"0",position:"relative"},attrs:{label:"公式"}},[a("div",{staticClass:"editInsertButton"},[a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("+")}}},[e._v("+")]),a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("-")}}},[e._v("-")]),a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("*")}}},[e._v("*")]),a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("/")}}},[e._v("/")]),a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("^")}}},[e._v("^")]),a("span",{on:{click:function(t){return t.stopPropagation(),e.symbolInsertFun("(")}}},[e._v("(")]),a("span",{on:{click:function(t){t.stopPropagation(),e.symbolInsertFun(")")}}},[e._v(")")])]),a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["formula",{initialValue:e.formula,rules:[{required:!0,message:"请键入公式"}]}],expression:"['formula', { initialValue: formula, rules: [{ required: true, message: '请键入公式' }]}]"}],ref:"formulaTextarea",attrs:{placeholder:"请在此键入公式。",rows:10},on:{change:function(t){return e.textareaChange(t)}}})],1),a("p",{directives:[{name:"show",rawName:"v-show",value:e.errMsgFlag,expression:"errMsgFlag"}],staticClass:"errMsg"},[a("a-icon",{attrs:{type:"warning",theme:"twoTone",twoToneColor:"#faad14"}}),e._v(e._s(e.errMsg))],1),a("div",{staticStyle:{"margin-bottom":"0"}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:e.grammarSuccess,expression:"grammarSuccess"}],attrs:{loading:e.checkFormulaLoading},on:{click:function(t){return t.stopPropagation(),e.checkGrammar(t)}}},[e._v("检查语法")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.checkFormulaSuccess,expression:"checkFormulaSuccess"}]},[a("a-icon",{attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}}),e._v(" 有效")],1)],1)],1)],1)]),a("a-tab-pane",{key:"2",attrs:{tab:"格式"}},[a("div",{staticClass:"message"},[a("a-form",{attrs:{layout:"vertical",form:e.formatForm}},[a("a-form-item",{staticClass:"twoCol",attrs:{label:"格式","wrapper-col":{span:24}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["col_format",{initialValue:"num",rules:[{required:!1}]}],expression:"['col_format', {initialValue: 'num', rules: [{ required: false }]}]"}],attrs:{name:"col_format"}},[a("a-select-option",{attrs:{value:"num"}},[e._v("数字")]),a("a-select-option",{attrs:{value:"percent"}},[e._v("百分比")]),a("a-select-option",{attrs:{value:"common"}},[e._v("普通")])],1)],1),a("a-form-item",{staticClass:"twoCol",staticStyle:{"margin-left":"20px"},attrs:{label:"小数点","wrapper-col":{span:24}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["decimal_num",{initialValue:"0",rules:[{required:!1}]}],expression:"['decimal_num', {initialValue: '0', rules: [{ required: false }]}]"}],attrs:{name:"decimal_num"}},e._l(19,function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v(e._s(r))])}),1)],1)],1)],1)])],1)],1)])])],1)},S=[],C=a("be94"),x=(a("386d"),a("28a5"),a("55dd"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"leftMenu"},[a("div",{class:e.ziduan?"hide-set":"lpc-show-set",on:{click:e.openSet}},[a("a-icon",{attrs:{type:"right"}}),a("p",[e._v("字段配置")])],1),a("div",{class:e.ziduan?"lpc-full":"lpc-full-hide"},[a("div",{staticClass:"header"},[a("a-input-search",{attrs:{placeholder:"搜索表字段"},on:{change:e.onChange}}),a("a-icon",{attrs:{type:"close"},on:{click:e.closeSet}})],1),a("a-tree",{attrs:{expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.dataSourceTree},on:{expand:e.onExpand,select:e.getInfo},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.title;return[r.indexOf(e.searchValue)>-1?a("span",[e._v("\n          "+e._s(r.substr(0,r.indexOf(e.searchValue)))+"\n          "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(r.substr(r.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):a("span",[e._v(e._s(r))])]}}])})],1)])}),F=[],k=(a("6b54"),function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.expandedKeys=[],e.searchValue="",e.SelectedKeys=[],e.autoExpandParent=!0,e.dataSource=[{title:"话题",key:"122",scopedSlots:{title:"title"},selectable:!1,children:[{title:"AntDesign",scopedSlots:{title:"title"},key:"10000"},{title:"AntDesign UI",scopedSlots:{title:"title"},key:"10600"}]},{title:"问题",scopedSlots:{title:"title"},key:"1",selectable:!1,children:[{title:"AntDesign UI 有多好",scopedSlots:{title:"title"},key:"60100"},{title:"AntDesign 是啥",scopedSlots:{title:"title"},key:"30010"}]},{title:"文章",scopedSlots:{title:"title"},key:"123",selectable:!1,children:[{title:"AntDesign 是一个设计语言",scopedSlots:{title:"title"},key:"100000"}]}],e.dataList=[],e.ziduan=!0,e}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"treeDblDataFun",value:function(e){}},{key:"onAtagDatasHChangeFun",value:function(e,t){e&&this.generateList(this.dataSourceTree)}},{key:"generateList",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];this.dataList.push(a),a.children&&this.generateList(a.children)}}},{key:"getParentKey",value:function(e,t){for(var a="",r=0;r<t.length;r++){var i=t[r];i.children&&(i.children.some(function(t){return t.key===e})?a=i.key:this.getParentKey(e,i.children)&&(a=this.getParentKey(e,i.children)))}return a}},{key:"onExpand",value:function(e){this.expandedKeys=e,this.autoExpandParent=!1}},{key:"onChange",value:function(e){var t=this,a=e.target.value,r=this.dataList.map(function(e){return e.title.indexOf(a)>-1?t.getParentKey(e.key,t.dataSourceTree):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t});Object.assign(this,{expandedKeys:r,searchValue:a,autoExpandParent:!0})}},{key:"openSet",value:function(){this.ziduan=!this.ziduan}},{key:"closeSet",value:function(){this.ziduan=!this.ziduan}},{key:"selectTreeFun",value:function(e,t){console.log(e,t)}},{key:"getInfo",value:function(e,t){if(e.length){t.id;this.treeDblDataFun(+e.toString())}}},{key:"filterOption",value:function(e,t){return console.log(t),console.log(this.dataSourceTree),console.log(t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0),t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}]),t}(d["d"]));u["a"]([Object(d["c"])({})],k.prototype,"dataSourceTree",void 0),u["a"]([Object(d["b"])("treeDblData")],k.prototype,"treeDblDataFun",null),u["a"]([Object(d["e"])("dataSourceTree",{deep:!0,immediate:!0})],k.prototype,"onAtagDatasHChangeFun",null),k=u["a"]([d["a"]],k);var I=k,T=I,O=(a("020e"),Object(_["a"])(T,x,F,!1,null,"71f12688",null)),E=O.exports,N=a("1516"),M=a.n(N),R=a("c1df"),$=a.n(R),L=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.spinning=!0,e.systeming=!0,e.tableLoading=!1,e.searchLoading=!1,e.dataSourceTree=[],e.loading=!1,e.saveLoading=!1,e.runLoading=!1,e.formulaCreateLoading=!1,e.dragOptions={sort:!0,scroll:!0,scrollSpeed:2,animation:150,ghostClass:"dragable-ghost",chosenClass:"dragable-chose",dragClass:"dragable-drag"},e.titleName="报表名称",e.titleNameEdit=!1,e.cancelTitleNameFlag="",e.editReportId=Object(m["b"])("reportId"),e.screenWidth={x:100,y:400},e.showFormulaFlag=!1,e.showFormulaTitle="编辑公式列",e.expandedKeysField=[],e.searchValueField="",e.autoExpandParentField=!0,e.dataSource=[{title:"话题",key:"122",scopedSlots:{title:"title"},selectable:!1,children:[{title:"AntDesign",scopedSlots:{title:"title"},key:"10000"},{title:"AntDesign UI",scopedSlots:{title:"title"},key:"10600"}]},{title:"问题",scopedSlots:{title:"title"},key:"1",selectable:!1,children:[{title:"AntDesign UI 有多好",scopedSlots:{title:"title"},key:"60100"},{title:"AntDesign 是啥",scopedSlots:{title:"title"},key:"30010"}]},{title:"文章",scopedSlots:{title:"title"},key:"123",selectable:!1,children:[{title:"AntDesign 是一个设计语言",scopedSlots:{title:"title"},key:"100000"}]}],e.expandedKeysFun=[],e.searchValueFun="",e.autoExpandParentFun=!0,e.insertFun=!0,e.insertField=!0,e.fieldData={},e.funData={func_desc:"",func_sample:"",func_type:0,id:0,title:""},e.fieldCalculate="",e.radioValue=0,e.formulaTextarea="",e.treeList=[],e.hangData=[],e.lieData=[],e.sortData=[],e.fixSearchData=[],e.showSearchData=[],e.screeningFlag=!0,e.columns=[],e.data=[],e.search=[],e.dataListFun=[],e.funcTreeData=[],e.grammarSuccess=!0,e.errMsg="语法错误提示。",e.errMsgFlag=!1,e.formula="",e.funcTree=!1,e.checkFormulaLoading=!1,e.checkFormulaSuccess=!1,e.pagination={current:1,pageSize:10,total:1},e.searchParam=[],e.reportParams={},e.checkboxData=[{key:0,label:"同步中"},{key:1,label:"不同"},{key:2,label:"已审核"},{key:3,label:"未找到"},{key:4,label:"未启用"},{key:5,label:"未比较"}],e}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"moment",value:function(){}},{key:"treeMsg",value:function(e){var t=this;-1===JSON.stringify(this.lieData).indexOf(e)?this.treeList.map(function(a,r){if(a.id===e){var i="custom/ReportManageDetail/addReportCols",n="lie";t.addReportColsFun(i,a,n)}}):this.$message.error("已有该选项",3)}},{key:"beforeCreate",value:function(){this.dataForm=this.$form.createForm(this),this.datetimeForm=this.$form.createForm(this),this.numberForm=this.$form.createForm(this),this.stringForm=this.$form.createForm(this),this.selectForm=this.$form.createForm(this),this.checkboxForm=this.$form.createForm(this),this.modalForm=this.$form.createForm(this),this.messageForm=this.$form.createForm(this),this.formatForm=this.$form.createForm(this),this.form=this.$form.createForm(this)}},{key:"created",value:function(){var e=this;this.$post("custom/ReportManageDetail/getAllFields",{reportId:this.reportId}).then(function(t){2e3===t.state?(e.dataSourceTree=t.data,e.treeListFun(t.data),e.spinning=!1):(e.spinning=!1,e.$message.error(t.message,3))}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("获取报表所有表的所有字段失败",3),e.spinning=!1}),this.editReportId&&this.$post("custom/ReportManage/getReportDetailInfo",{reportId:this.editReportId}).then(function(t){2e3===t.state?(t.data.fields.map(function(t,a){e.lieData.push({colId:t.colId,title:t.title,fieldId:t.fieldId})}),t.data.group.map(function(t,a){e.hangData.push({fieldId:t.fieldId,title:t.field_title,groupId:t.groupId})}),t.data.sort.map(function(t,a){e.sortData.push({fieldId:t.fieldId,title:t.field_title,sortId:t.sortId,sortType:t.sortType})}),t.data.fixSearch.map(function(t,a){var r,i=t.logic.label;if("date"===t.searchType||"datetime"===t.searchType)r=[$()(t.search_param.split(",")[0],"YYYY-MM-DD"),$()(t.search_param.split(",")[1],"YYYY-MM-DD")],i+="  "+t.search_param.split(",")[0]+" ～ "+t.search_param.split(",")[1];else if("checkbox"===t.searchType){var n=t.search_param.split(",");i+="  ",r=[];for(var o=0;o<n.length;o++)r.push(e.checkboxData[+n[o]]),i+=e.checkboxData[n[o]].label+"  "}else if("select"===t.searchType){var s=t.search_param.split(",");i+="  ",r=[];for(var l=0;l<s.length;l++)s[l]?(r.push(e.checkboxData[+s[l]]),i+=e.checkboxData[s[l]].label+'  " "'):r={key:"",label:"无选择"}}else r=t.search_param,i+="  "+t.search_param;e.fixSearchData.push({fieldId:t.fieldId,search_logic:t.logic,searchId:t.searchId,field_type:t.searchType,title:t.showTitle,search_param:r,extra:i})}),t.data.showSearch.map(function(t,a){e.showSearchData.push({fieldId:t.fieldId,title:t.showTitle,searchId:t.searchId})}),e.getReportDetail(),e.spinning=!1):(e.spinning=!1,e.$message.error(t.message,3))}).catch(function(t){console.log(t),"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("获取报表所有表的所有字段失败",3),e.spinning=!1})}},{key:"getReportDetail",value:function(e){var t,a=this;this.tableLoading=!0,t=e||{reportId:this.reportId,pageSize:10,nowpage:1,searchParam:""},this.$post("custom/Report/getReportDetail",t).then(function(e){if(2e3===e.state){a.data=e.data.data,a.columns=e.data.columns,a.search=e.data.search,a.columns.length>7&&(a.screenWidth={x:"150%",y:400}),a.data.map(function(e,t){e.keyFlagId=t}),a.columns.map(function(e,t){e.width=15*e.title.length}),a.tableLoading=!1;var t=Object(C["a"])({},a.pagination);t.total=e.data.count,a.pagination=t}else a.tableLoading=!1,a.data=[],a.search=[],a.columns=[],a.$message.error(e.message,3)}).catch(function(e){"ECONNABORTED"===e.code?a.$message.error("请求超时",3):a.$message.error("请求表格失败",3),a.tableLoading=!1})}},{key:"addReportColsFun",value:function(e,t,a){var r=this;this.spinning=!0,this.$post(e,{reportId:this.reportId,fieldId:t.id}).then(function(e){2e3===e.state?("lie"===a?r.lieData.push({fieldId:t.id,title:t.title,colId:e.data.colId}):"hang"===a?r.hangData.push({fieldId:t.id,title:t.title,groupId:e.data.groupId}):"sort"===a&&r.sortData.push({fieldId:t.id,title:t.title,sortId:e.data.sortId,sortType:"asc"}),r.getReportDetail(),r.spinning=!1):(r.spinning=!1,r.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code?r.$message.error("请求超时",3):r.$message.error("新增字段失败",3),r.spinning=!1})}},{key:"treeListFun",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];this.treeList.push(a),a.children&&this.treeListFun(a.children)}}},{key:"nextStep",value:function(){var e=this;e.loading=!0,setTimeout(function(){e.loading=!1,e.$emit("nextStep")},1e3)}},{key:"prevStep",value:function(){this.$emit("prevStep")}},{key:"handleChangeH",value:function(e){var t=this;this.lieData.length?e?-1===JSON.stringify(this.hangData).indexOf(e)&&this.treeList.map(function(a,r){if(a.id===e){var i="custom/ReportManageDetail/addGroupRow",n="hang";t.addReportColsFun(i,a,n)}}):this.$message.error("已有该选项",3):this.$message.error("请先添加列",3)}},{key:"handleChangeL",value:function(e){var t=this;e&&(-1===JSON.stringify(this.lieData).indexOf(e)?this.treeList.map(function(a,r){if(a.id===e){var i="custom/ReportManageDetail/addReportCols",n="lie";t.addReportColsFun(i,a,n)}}):this.$message.error("已有该选项",3))}},{key:"handleChangeSort",value:function(e){var t=this;this.lieData.length?e?-1===JSON.stringify(this.sortData).indexOf(e)&&this.treeList.map(function(a,r){if(a.id===e){var i="custom/ReportManageDetail/addReportSort",n="sort";t.addReportColsFun(i,a,n)}}):this.$message.error("已有该选项",3):this.$message.error("请先添加列",3)}},{key:"deleteGroupH",value:function(e,t){var a="hang",r="custom/ReportManageDetail/delGroupRow",i={groupId:e.groupId};this.deleteGroupFun(r,a,i,"one",t)}},{key:"deleteGroupL",value:function(e,t){var a="lie",r="custom/ReportManageDetail/delReportCols",i={colId:e.colId};this.deleteGroupFun(r,a,i,"one",t)}},{key:"deleteGroupSort",value:function(e,t){var a="sort",r="custom/ReportManageDetail/delReportSort",i={sortId:e.sortId};this.deleteGroupFun(r,a,i,"one",t)}},{key:"deleteAllGroup",value:function(e){var t,a,r="all";if("hang"===e){t="custom/ReportManageDetail/delGroupRow";var i=[];this.hangData.map(function(e,t){i.push(e.groupId)}),a={groupId:i.toString()},this.deleteGroupFun(t,e,a,r)}else if("lie"===e){t="custom/ReportManageDetail/delReportCols";var n=[];this.lieData.map(function(e,t){n.push(e.colId)}),a={colId:n.toString()},this.deleteGroupFun(t,e,a,r)}else if("sort"===e){t="custom/ReportManageDetail/delReportSort";var o=[];this.sortData.map(function(e,t){o.push(e.sortId)}),a={sortId:o.toString()},this.deleteGroupFun(t,e,a,r)}}},{key:"deleteGroupFun",value:function(e,t,a,r,i){var n=this;this.$post(e,a).then(function(e){2e3===e.state?(void 0!==i&&("hang"===t?n.hangData.splice(i,1):"lie"===t?n.lieData.splice(i,1):"sort"===t&&n.sortData.splice(i,1)),"all"===r&&("hang"===t?n.hangData=[]:"lie"===t?n.lieData=[]:"sort"===t&&(n.sortData=[])),n.$message.success("删除成功",3),n.getReportDetail()):n.$message.error(e.message,3)}).catch(function(e){"ECONNABORTED"===e.code?n.$message.error("请求超时",3):n.$message.error("删除失败",3)})}},{key:"sortingToggleFun",value:function(e,t){var a="asc"===e.sortType?"desc":"asc",r=e.sortId,i={sortType:a,sortId:r};this.sortingSubmitFun(i,t)}},{key:"sortingFun",value:function(e){var t=[];this.sortData.map(function(e,a){t.push(e.sortId)});var a={sortType:e,sortId:t.join(",")};this.sortingSubmitFun(a)}},{key:"sortingSubmitFun",value:function(e,t){var a=this;this.$post("custom/ReportManageDetail/changeSortType",e).then(function(r){2e3===r.state?(void 0!==t?a.sortData[t].sortType=e.sortType:a.sortData.map(function(t,a){t.sortType=e.sortType}),a.$message.success("变更排序成功",3),a.getReportDetail()):a.$message.error(r.message,3)}).catch(function(e){"ECONNABORTED"===e.code?a.$message.error("请求超时",3):a.$message.error("变更排序失败",3)})}},{key:"handleChangeF",value:function(e){var t=this;this.lieData.length?e&&(-1===JSON.stringify(this.fixSearchData).indexOf(e)?this.dataSourceTree.map(function(a,r){a.children.map(function(r,i){if(r.id===e){var n=Object.assign({},r);n.popover=!0,n.new=!0,n.tableId=a.id,n.fieldId=e,"checkbox"===n.field_type?(n.search_logic={key:"in",label:"等于"},n.search_param=[]):"select"===n.field_type?(n.search_logic={key:"=",label:"等于"},n.search_param={}):"string"===n.field_type||"num"===n.field_type?(n.search_logic={key:"=",label:"等于"},n.search_param=""):"datetime"===n.field_type?n.search_param=[]:"date"===n.field_type&&(n.search_param=[]),t.fixSearchData.push(n),t.screeningFlag=!0}})}):this.$message.error("已有该选项",3)):this.$message.error("请先添加列",3)}},{key:"handleChangeX",value:function(e){var t=this;this.lieData.length?e&&(-1===JSON.stringify(this.showSearchData).indexOf(e)?this.dataSourceTree.map(function(a,r){a.children.map(function(r,i){if(r.id===e){var n=Object.assign({},r);n.tableId=a.id,n.fieldId=e,t.xianshifilterFun(n)}})}):this.$message.error("已有该选项",3)):this.$message.error("请先添加列",3)}},{key:"xianshifilterFun",value:function(e){var t=this;this.spinning=!0,this.$post("custom/ReportManageDetail/addReportShowSearch",{reportId:this.reportId,tableId:e.tableId,fieldId:e.id}).then(function(a){2e3===a.state?(t.spinning=!1,t.showSearchData.push({title:e.title,fieldId:e.fieldId,searchId:a.data.searchId}),t.getReportDetail(),t.$message.success(a.message,3)):(t.spinning=!1,t.$message.error(a.message,3))}).catch(function(e){"ECONNABORTED"===e.code?t.$message.error("请求超时",3):t.$message.error("请求新增显示筛选器失败",3),t.spinning=!1})}},{key:"filterOption",value:function(e,t){return t.componentOptions.children[1].text.toLowerCase().indexOf(e.toLowerCase())>=0}},{key:"deleteSearch",value:function(e,t){var a;if("F"===t){var r=this.fixSearchData.slice(e,e+1);a=r[0].searchId}else if("X"===t){var i=this.showSearchData.slice(e,e+1);a=i[0].searchId}this.delReportSearch(a,e,t)}},{key:"hidePopover",value:function(e,t,a){e.new&&this.fixSearchData.splice(t,1),e.popover=!1}},{key:"enterPopover",value:function(e,t){var a=this;e.new&&(e.new=!1),"F"===t?e.search_type=1:"X"===t&&(e.search_type=2),"date"===e.field_type?this.dataForm.validateFields(function(t,r){var i={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:"between",search_type:e.search_type,search_name:e.title,search_param:""};if(r["search_param"]){if(!t){var n=r["search_param"];e.extra=n[0].format("YYYY-MM-DD")+" ～"+n[1].format("YYYY-MM-DD"),e.search_param=r.search_param,e.popover=!1,i.search_param=n[0].format("YYYY-MM-DD")+","+n[1].format("YYYY-MM-DD")}}else e.extra="所有时间",e.popover=!1,a.dataForm.resetFields();a.subDataSearch(i,e.field_type,e.extra,r.search_logic),a.dataForm.resetFields()}):"datetime"===e.field_type?this.datetimeForm.validateFields(function(t,r){if(!t){var i=r["search_param"];e.extra=i[0].format("YYYY-MM-DD HH:mm")+" ～"+i[1].format("YYYY-MM-DD HH:mm"),e.search_param=r.search_param,e.popover=!1;var n={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:"between",search_type:e.search_type,search_name:e.title,search_param:i[0].format("YYYY-MM-DD HH:mm")+","+i[1].format("YYYY-MM-DD HH:mm")};a.subDataSearch(n,e.field_type,e.extra,r.search_logic),a.datetimeForm.resetFields()}}):"num"===e.field_type?this.numberForm.validateFields(function(t,r){if(!t){e.extra=r.search_logic.label+"  ",e.extra+=r.search_param?r.search_param:'  " "',e.popover=!1,e.search_logic=r.search_logic,e.search_param=r.search_param;var i={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:r.search_logic.key,search_type:e.search_type,search_name:e.title,search_param:r.search_param};a.subDataSearch(i,e.field_type,e.extra,r.search_logic),a.numberForm.resetFields()}}):"string"===e.field_type?this.stringForm.validateFields(function(t,r){if(!t){e.extra=r.search_logic.label+"  ",e.extra+=r.search_param?r.search_param:'  " "',e.search_logic=r.search_logic,e.search_param=r.search_param,e.popover=!1;var i={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:r.search_logic.key,search_type:e.search_type,search_name:e.title,search_param:r.search_param};a.subDataSearch(i,e.field_type,e.extra,r.search_logic),a.stringForm.resetFields()}}):"select"===e.field_type?this.selectForm.validateFields(function(t,r){if(!t){e.extra=r.search_logic.label+"  ",e.extra+=r.search_param?r.search_param.label:'  " "',e.popover=!1,e.search_logic=r.search_logic,e.search_param=r.search_param;var i={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:r.search_logic.key,search_type:e.search_type,search_name:e.title,search_param:r.search_param.key};a.subDataSearch(i,e.field_type,e.extra,r.search_logic),a.selectForm.resetFields()}}):"checkbox"===e.field_type&&this.checkboxForm.validateFields(function(t,r){if(!t){var i=[],n=[];r.search_param?(r.search_param.forEach(function(e,t){n.push(e.label),i.push(e.key)}),e.extra=r.search_logic.label+"  "+n.join()):e.extra=r.search_logic.label+'    " "',e.popover=!1,e.search_logic=r.search_logic,e.search_param=r.search_param;var o={reportId:a.reportId,tableId:e.tableId,fieldId:e.id,search_logic:r.search_logic.key,search_type:e.search_type,search_name:e.title,search_param:i.join()};a.subDataSearch(o,e.field_type,e.extra,r.search_logic),a.checkboxForm.resetFields()}})}},{key:"subDataSearch",value:function(e,t,a,r){var i=this;this.spinning=!0,this.$post("custom/ReportManageDetail/addReportSearch",e).then(function(n){2e3===n.state?(i.spinning=!1,i.fixSearchData.splice(i.fixSearchData.length-1,1,{searchId:n.data.searchId,fieldId:e.fieldId,field_type:t,title:e.search_name,search_logic:r,search_param:e.search_param,extra:a}),i.getReportDetail(),i.$message.success(n.message,3)):(i.spinning=!1,i.$message.error(n.message,3))}).catch(function(e){"ECONNABORTED"===e.code?i.$message.error("请求超时",3):i.$message.error("新增固定筛选器失败",3),i.spinning=!1})}},{key:"delReportSearch",value:function(e,t,a){var r=this;this.spinning=!0,this.$post("custom/ReportManageDetail/delReportSearch",{searchId:e}).then(function(e){2e3===e.state?(r.spinning=!1,"F"===a?r.fixSearchData.splice(t,1):"X"===a&&r.showSearchData.splice(t,1),r.getReportDetail(),r.$message.success(e.message,3)):(r.spinning=!1,r.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code?r.$message.error("请求超时",3):r.$message.error("删除筛选器失败",3),r.spinning=!1})}},{key:"visibleChangeFun",value:function(e){if(this.screeningFlag){var t=this.fixSearchData[this.fixSearchData.length-1];t.new&&this.fixSearchData.pop()}else{var a=this.showSearchData[this.showSearchData.length-1];a.new&&this.showSearchData.pop()}}},{key:"onEndHang",value:function(e){var t=[];this.hangData.map(function(e,a){t.push(e.groupId)}),this.draggableEndSubFun("group",t.toString())}},{key:"onEndLie",value:function(e){var t=[];this.lieData.map(function(e,a){t.push(e.colId)}),this.draggableEndSubFun("field",t.toString())}},{key:"onEndSort",value:function(e){var t=[];this.sortData.map(function(e,a){t.push(e.sortId)}),this.draggableEndSubFun("sort",t.toString())}},{key:"onEndFixSearch",value:function(e){var t=[];this.fixSearchData.map(function(e,a){t.push(e.searchId)}),this.draggableEndSubFun("fixSearch",t.toString())}},{key:"onEndShowSearch",value:function(e){var t=[];this.showSearchData.map(function(e,a){t.push(e.searchId)}),this.draggableEndSubFun("showSearch",t.toString())}},{key:"draggableEndSubFun",value:function(e,t){var a=this;this.spinning=!0,this.$post("custom/ReportManageDetail/changeParamSort",{type:e,ids:t}).then(function(e){2e3===e.state?(a.getReportDetail(),a.spinning=!1,a.$message.success(e.message,3)):(a.spinning=!1,a.$message.error(e.message,3))}).catch(function(e){"ECONNABORTED"===e.code?a.$message.error("请求超时",3):a.$message.error("排序失败",3),a.spinning=!1})}},{key:"titleNameEditFun",value:function(e){this.titleName=e}},{key:"editTitleName",value:function(){this.titleNameEdit=!0,this.cancelTitleNameFlag=this.titleName}},{key:"saveEditTitleName",value:function(){this.titleNameEdit=!1}},{key:"cancelEditTitleName",value:function(){this.titleNameEdit=!1,this.titleName=this.cancelTitleNameFlag}},{key:"showFormulaModel",value:function(){var e=this;this.showFormulaFlag=!0,this.$post("custom/Formula/getSystemFunc",null).then(function(t){2e3===t.state?(e.generateList(t.data),e.funcTreeData=t.data,e.systeming=!1):(e.systeming=!1,e.$message.error(t.message,3))}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("删除筛选器失败",3),e.systeming=!1})}},{key:"formulaCreate",value:function(){var e=this;this.formulaCreateLoading=!0;var t=this.formatForm.getFieldsValue(["col_format","decimal_num"]);t.col_format||(t={col_format:"num",decimal_num:"0"}),this.messageForm.validateFields(function(a,r){if(a)e.formulaCreateLoading=!1;else{var i=Object.assign({},r,t);i.reportId=e.reportId,e.$post("custom/reportManageDetail/addFormulaCols",i).then(function(t){e.formulaCreateLoading=!1,2e3===t.state?(e.getReportDetail(),e.messageForm.resetFields(),e.formatForm.resetFields(),e.showFormulaFlag=!1,e.lieData.push({fieldId:t.data.colId,title:i.col_title,colId:t.data.colId})):e.$message.error(t.message,3)}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("添加公式列失败",3),e.formulaCreateLoading=!1})}})}},{key:"textareaChange",value:function(e){this.formula=e.target.value}},{key:"formulaCancel",value:function(){this.showFormulaFlag=!this.showFormulaFlag,this.insertFun=!0,this.insertField=!0,this.funData={func_desc:"",func_sample:"",func_type:0,id:0,title:""},this.fieldData={}}},{key:"generateList",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];this.dataListFun.push(a),a.children&&this.generateList(a.children)}}},{key:"getParentKey",value:function(e,t){for(var a,r=0;r<t.length;r++){var i=t[r];i.children&&(i.children.some(function(t){return t.id===e})?a=i.key:this.getParentKey(e,i.children)&&(a=this.getParentKey(e,i.children)))}return a}},{key:"onExpandField",value:function(e){this.expandedKeysField=e,this.autoExpandParentField=!1}},{key:"onChangeField",value:function(e){var t=this,a=e.target.value,r=this.treeList.map(function(e){return e.title.indexOf(a)>-1?t.getParentKey(e.key,t.dataSourceTree):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t});Object.assign(this,{expandedKeysField:r,searchValueField:a,autoExpandParentField:!0})}},{key:"onExpandFun",value:function(e){this.expandedKeysFun=e,this.autoExpandParentFun=!1}},{key:"onChangeFun",value:function(e){var t=this,a=e.target.value,r=this.dataListFun.map(function(e){return e.title.indexOf(a)>-1?t.getParentKey(e.id,t.funcTreeData):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t});Object.assign(this,{expandedKeysFun:r,searchValueFun:a,autoExpandParentFun:!0})}},{key:"onselectTreeField",value:function(e,t){this.fieldData=t.node.dataRef,this.insertField=!1}},{key:"onSelectTreeFun",value:function(e,t){this.funData=t.node.dataRef,this.funcTree=!0,this.insertFun=!1}},{key:"insertFieldFun",value:function(){var e=this.$refs.formulaTextarea.$el,t=Object(m["c"])(e),a=this.fieldCalculate?this.fieldCalculate+"("+this.fieldData.formula+") ":this.fieldData.formula+" ";Object(m["a"])(e,t,a),this.formula=e.value}},{key:"insertFunFun",value:function(){var e=this.$refs.formulaTextarea.$el,t=Object(m["c"])(e),a=this.funData.func_sample+" ";Object(m["a"])(e,t,a),this.formula=e.value}},{key:"symbolInsertFun",value:function(e){var t=this.$refs.formulaTextarea.$el,a=Object(m["c"])(t),r=e;Object(m["a"])(t,a,r),this.formula=t.value}},{key:"formulaWatch",value:function(e,t){e!==t&&(this.grammarSuccess=!0,this.errMsgFlag=!1,this.checkFormulaSuccess=!1)}},{key:"checkGrammar",value:function(){var e=this;this.formula&&(this.checkFormulaLoading=!0,this.$post("custom/Formula/checkFormula",{reportId:this.reportId,formula:this.formula}).then(function(t){2e3===t.state?(e.checkFormulaLoading=!1,e.grammarSuccess=!1,e.checkFormulaSuccess=!0):(e.checkFormulaLoading=!1,e.grammarSuccess=!1,e.errMsg=t.message,e.errMsgFlag=!0)}).catch(function(t){console.log(t),e.errMsg="请求失败",e.errMsgFlag=!0,e.checkFormulaLoading=!1,e.$message.error("请求失败",3)}))}},{key:"handleReset",value:function(){this.searchParam=[],this.form.resetFields()}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),this.searchParam=[],this.form.validateFields(function(e,a){t.search.map(function(e,r){var i=e.searchName.split(".")[0],n=e.searchName.split(".")[1],o="";if(e.searchName===i+"."+n){if(o=a[i][n]||"",a[i][n])if("datetime"===e.searchType){var s=a[i][n];o=s[0].format("YYYY-MM-DD HH:mm")+","+s[1].format("YYYY-MM-DD HH:mm")}else if("date"===e.searchType){var l=a[i][n];o=l[0].format("YYYY-MM-DD")+","+l[1].format("YYYY-MM-DD")}t.searchParam.push({logic:e.logic,name:e.searchName,search_type:e.searchType,search_param:o})}});var r=JSON.stringify(t.searchParam);if(!e){var i={reportId:t.reportId,searchParam:r,pageSize:10,nowpage:1};t.getReportDetail(i)}})}},{key:"onChangeTab",value:function(e){var t=Object(C["a"])({},this.pagination);t.current=e.current,this.pagination=t;var a=JSON.stringify(this.searchParam)||"",r={reportId:this.reportId,searchParam:a,nowpage:e.current,pageSize:e.pageSize};this.getReportDetail(r)}},{key:"runFun",value:function(){var e=this;this.runLoading=!0;var t=this;setTimeout(function(){t.runLoading=!1,window.open(window.location.origin+"/reportTable?reportId="+e.reportId)},200)}},{key:"treeListFilter",get:function(){return this.treeList.filter(function(e){return""!==e.title})}}]),t}(d["d"]);u["a"]([Object(d["c"])()],L.prototype,"reportId",void 0),u["a"]([Object(d["e"])("formula",{deep:!0,immediate:!0})],L.prototype,"formulaWatch",null),L=u["a"]([Object(d["a"])({components:{leftMenu:E,Draggable:M.a}})],L);var j=L,P=j,Y=(a("8982"),Object(_["a"])(P,D,S,!1,null,null,null)),A=Y.exports,V=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.current=0,e.dataSourceList=[],e.reportId="",e}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){this.initDataFun()}},{key:"reportIdEmit",value:function(e){console.log("父组件接收到的reportId"+e),this.reportId=e}},{key:"nextStep",value:function(){this.current<2&&(this.current+=1)}},{key:"prevStep",value:function(){this.current>0&&(this.current-=1)}},{key:"initDataFun",value:function(){var e=this;this.$post("custom/Datasmanage/getAllSourrceList").then(function(t){2e3===t.state?e.dataSourceList=t.data:e.$message.error(t.message,3)}).catch(function(t){"ECONNABORTED"===t.code?e.$message.error("请求超时",3):e.$message.error("请求失败",3),e.dataSourceList=[]})}}]),t}(d["d"]);u["a"]([Object(d["c"])()],V.prototype,"msg",void 0),u["a"]([h["a"]],V.prototype,"changeOpenKeys",void 0),V=u["a"]([Object(d["a"])({components:{Step1:w,Step2:A}})],V);var q=V,B=q,H=(a("d9ad"),Object(_["a"])(B,r,i,!1,null,null,null));t["default"]=H.exports},"6b54":function(e,t,a){"use strict";a("3846");var r=a("cb7c"),i=a("0bfb"),n=a("9e1e"),o="toString",s=/./[o],l=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!n&&e instanceof RegExp?i.call(e):void 0)}):s.name!=o&&l(function(){return s.call(this)})},"6d72":function(e,t,a){},"702d":function(e,t,a){"use strict";var r=a("cc8a"),i=a.n(r);i.a},73334:function(e,t,a){"use strict";var r=a("0d58"),i=a("2621"),n=a("52a7"),o=a("4bf8"),s=a("626a"),l=Object.assign;e.exports=!l||a("79e5")(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=r})?function(e,t){var a=o(e),l=arguments.length,c=1,u=i.f,d=n.f;while(l>c){var h,p=s(arguments[c++]),f=u?r(p).concat(u(p)):r(p),m=f.length,g=0;while(m>g)d.call(p,h=f[g++])&&(a[h]=p[h])}return a}:l},"7ddd":function(e,t,a){},8982:function(e,t,a){"use strict";var r=a("7ddd"),i=a.n(r);i.a},"8b97":function(e,t,a){var r=a("d3f4"),i=a("cb7c"),n=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,a){return n(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:n}},9093:function(e,t,a){var r=a("ce10"),i=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"9e62":function(e,t,a){},aae3:function(e,t,a){var r=a("d3f4"),i=a("2d95"),n=a("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==i(e))}},ac6a:function(e,t,a){for(var r=a("cadf"),i=a("0d58"),n=a("2aba"),o=a("7726"),s=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(p),m=0;m<f.length;m++){var g,v=f[m],b=p[v],_=o[v],y=_&&_.prototype;if(y&&(y[u]||s(y,u,h),y[d]||s(y,d,v),l[v]=h,b))for(g in r)y[g]||n(y,g,r[g],!0)}},be94:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){r(e,t,a[t])})}return e}a.d(t,"a",function(){return i})},cc8a:function(e,t,a){},d9ad:function(e,t,a){"use strict";var r=a("6d72"),i=a.n(r);i.a},f751:function(e,t,a){var r=a("5ca1");r(r.S+r.F,"Object",{assign:a("73334")})},ff1a:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return s});a("6b54"),a("386d"),a("4917"),a("3b2b"),a("ac6a"),a("28a5");var r=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?a[2]:null},i=function(e){var t={text:"",start:0,end:0};if(e.setSelectionRange)e.focus(),t.start=e.selectionStart,t.end=e.selectionEnd,t.text=t.start!==t.end?e.value.substring(t.start,t.end):"";else if(document.selection){e.focus();var a=0,r=document.selection.createRange(),i=document.body.createTextRange();for(i.moveToElementText(e),t.text=r.text,t.bookmark=r.getBookmark(),a=0;i.compareEndPoints("StartToStart",r)<0&&0!==r.moveStart("character",-1);a++)"/r"===e.value.charAt(a)&&a++;t.start=a,t.end=t.text.length+t.start}return t},n=function(e,t){var a;e.focus(),e.setSelectionRange?e.setSelectionRange(t.start,t.end):e.createtextRange&&(a=e.createTextRange(),e.value.length===t.start?(a.collapse(!1),a.select()):(a.moveToBookmark(t.bookmark),a.select()))},o=function(e,t,a){var r,i,o,s,l,c="";n(e,t),e.setSelectionRange?(r=e.value,i=r.substring(0,t.start)+a+r.substring(t.end),o=s=t.start+a.length,l=e.scrollTop,e.value=i,e.scrollTop!==l&&(e.scrollTop=l),e.setSelectionRange(o,s)):e.createTextRange&&(c.document.selection.createRange(),c.text=a,c.select())},s=function(e){var t=new Date,a=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];return"YYYY"===e?t.getFullYear().toString():"MM"===e?(t.getMonth()+1).toString():"DD"===e?t.getDate().toString():"dddd"===e?a[t.getDay()]:""}}}]);